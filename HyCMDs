-- Gui update
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MyGUI"
ScreenGui.Parent = game.Players.LocalPlayer.PlayerGui

local Frame = Instance.new("Frame")
Frame.Name = "MainFrame"
Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0.5, 0, 0.5, 0)
Frame.Position = UDim2.new(0.25, 0, 0.25, 0)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.ClipsDescendants = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.Size = UDim2.new(1, 0, 0.1, 0)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.Text = "Title"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextStrokeTransparency = 0.8

local TopCornersFrame = Instance.new("Frame")
TopCornersFrame.Name = "TopCornersFrame"
TopCornersFrame.Parent = Title
TopCornersFrame.Size = UDim2.new(1, 0, 1, 0)
TopCornersFrame.BackgroundColor3 = Title.BackgroundColor3
TopCornersFrame.BorderSizePixel = 0
TopCornersFrame.BackgroundTransparency = 1

local UICornerTop = Instance.new("UICorner")
UICornerTop.CornerRadius = UDim.new(0, 10)
UICornerTop.Parent = TopCornersFrame

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Parent = Frame
CloseButton.Size = UDim2.new(0.1, 0, 0.1, 0)
CloseButton.Position = UDim2.new(0.9, 0, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
CloseButton.Text = "❌"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextScaled = true

local UICornerButton = Instance.new("UICorner")
UICornerButton.CornerRadius = UDim.new(0, 10)
UICornerButton.Parent = CloseButton

local InfoLabel = Instance.new("TextLabel")
InfoLabel.Name = "InfoLabel"
InfoLabel.Parent = Frame
InfoLabel.Size = UDim2.new(1, 0, 0.9, 0)
InfoLabel.Position = UDim2.new(0, 0, 0.1, 0)
InfoLabel.BackgroundTransparency = 1
InfoLabel.Text = "Update \n -Optimization"
InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoLabel.TextScaled = true
InfoLabel.TextSize = 5

local DontShowAgainFrame = Instance.new("Frame")
DontShowAgainFrame.Name = "DontShowAgainFrame"
DontShowAgainFrame.Parent = Frame
DontShowAgainFrame.Size = UDim2.new(1, 0, 0.1, 0)
DontShowAgainFrame.Position = UDim2.new(0, 0, 0.9, 0)
DontShowAgainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)

local UICornerDontShowAgain = Instance.new("UICorner")
UICornerDontShowAgain.CornerRadius = UDim.new(0, 10)
UICornerDontShowAgain.Parent = DontShowAgainFrame

local YesButton = Instance.new("TextButton")
YesButton.Name = "YesButton"
YesButton.Parent = DontShowAgainFrame
YesButton.Size = UDim2.new(0.5, 0, 1, 0)
YesButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
YesButton.Text = "Dont Show Again (One tap)"
YesButton.TextColor3 = Color3.fromRGB(255, 255, 255)
YesButton.TextScaled = true

local UICornerYes = Instance.new("UICorner")
UICornerYes.CornerRadius = UDim.new(0, 10)
UICornerYes.Parent = YesButton

local UICornerNo = Instance.new("UICorner")
UICornerNo.CornerRadius = UDim.new(0, 10)
UICornerNo.Parent = NoButton

Frame.Position = UDim2.new(0.25, 0, 1, 0)
Frame:TweenPosition(UDim2.new(0.25, 0, 0.25, 0), "Out", "Quad", 0.5)

local Camera = workspace.CurrentCamera
local BlurEffect = Instance.new("BlurEffect")
BlurEffect.Name = "BlurEffect"
BlurEffect.Size = 50
BlurEffect.Parent = Camera

CloseButton.MouseButton1Click:Connect(function()
    Frame:TweenPosition(UDim2.new(0.25, 0, 1, 0), "Out", "Quad", 0.5)
    for i = 50, 0, -10 do
        BlurEffect.Size = i
        wait(0)
    end
    BlurEffect:Destroy()
    wait(0.5)
    ScreenGui:Destroy()
end)

YesButton.MouseButton1Click:Connect(function()
    writefile("V0.1_1.txt", "1")
    CloseButton:MouseButton1Click()
end)


Frame.AncestryChanged:Connect(function()
    if not Frame:IsDescendantOf(ScreenGui) then
        BlurEffect:Destroy()
    end
end)

-- File
if isfile("V0.1_1.txt") then
    local value = readfile("V0.1_1.txt")
    if value == "1" then
        ScreenGui:Destroy()
    end
end

-- Gui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "MyGUI"
ScreenGui.Parent = game.Players.LocalPlayer.PlayerGui

local Frame = Instance.new("Frame")
Frame.Name = "MainFrame"
Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0.5, 0, 0.5, 0)
Frame.Position = UDim2.new(0.25, 0, 0.25, 0)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BorderSizePixel = 0
Frame.ClipsDescendants = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = Frame
Title.Size = UDim2.new(1, 0, 0.1, 0)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.Text = "Title"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextStrokeTransparency = 0.8

local TopCornersFrame = Instance.new("Frame")
TopCornersFrame.Name = "TopCornersFrame"
TopCornersFrame.Parent = Title
TopCornersFrame.Size = UDim2.new(1, 0, 1, 0)
TopCornersFrame.BackgroundColor3 = Title.BackgroundColor3
TopCornersFrame.BorderSizePixel = 0
TopCornersFrame.BackgroundTransparency = 1

local UICornerTop = Instance.new("UICorner")
UICornerTop.CornerRadius = UDim.new(0, 10)
UICornerTop.Parent = TopCornersFrame

local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Parent = Frame
CloseButton.Size = UDim2.new(0.1, 0, 0.1, 0)
CloseButton.Position = UDim2.new(0.9, 0, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
CloseButton.Text = "❌"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextScaled = true

local UICornerButton = Instance.new("UICorner")
UICornerButton.CornerRadius = UDim.new(0, 10)
UICornerButton.Parent = CloseButton

local InfoLabel = Instance.new("TextLabel")
InfoLabel.Name = "InfoLabel"
InfoLabel.Parent = Frame
InfoLabel.Size = UDim2.new(1, 0, 0.9, 0)
InfoLabel.Position = UDim2.new(0, 0, 0.1, 0)
InfoLabel.BackgroundTransparency = 1
InfoLabel.Text = "Suc\nHello!"
InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoLabel.TextScaled = true
InfoLabel.TextSize = 5

local DontShowAgainFrame = Instance.new("Frame")
DontShowAgainFrame.Name = "DontShowAgainFrame"
DontShowAgainFrame.Parent = Frame
DontShowAgainFrame.Size = UDim2.new(1, 0, 0.1, 0)
DontShowAgainFrame.Position = UDim2.new(0, 0, 0.9, 0)
DontShowAgainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)

local UICornerDontShowAgain = Instance.new("UICorner")
UICornerDontShowAgain.CornerRadius = UDim.new(0, 10)
UICornerDontShowAgain.Parent = DontShowAgainFrame

local YesButton = Instance.new("TextButton")
YesButton.Name = "YesButton"
YesButton.Parent = DontShowAgainFrame
YesButton.Size = UDim2.new(0.5, 0, 1, 0)
YesButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
YesButton.Text = "Dont Show Again (One tap)"
YesButton.TextColor3 = Color3.fromRGB(255, 255, 255)
YesButton.TextScaled = true

local UICornerYes = Instance.new("UICorner")
UICornerYes.CornerRadius = UDim.new(0, 10)
UICornerYes.Parent = YesButton

local UICornerNo = Instance.new("UICorner")
UICornerNo.CornerRadius = UDim.new(0, 10)
UICornerNo.Parent = NoButton

Frame.Position = UDim2.new(0.25, 0, 1, 0)
Frame:TweenPosition(UDim2.new(0.25, 0, 0.25, 0), "Out", "Quad", 0.5)

local Camera = workspace.CurrentCamera
local BlurEffect = Instance.new("BlurEffect")
BlurEffect.Name = "BlurEffect"
BlurEffect.Size = 50
BlurEffect.Parent = Camera

CloseButton.MouseButton1Click:Connect(function()
    Frame:TweenPosition(UDim2.new(0.25, 0, 1, 0), "Out", "Quad", 0.5)
    for i = 50, 0, -10 do
        BlurEffect.Size = i
        wait(0)
    end
    BlurEffect:Destroy()
    wait(0.5)
    ScreenGui:Destroy()
end)

YesButton.MouseButton1Click:Connect(function()
    writefile("DontShowAgain.txt", "1")
    CloseButton:MouseButton1Click()
end)


Frame.AncestryChanged:Connect(function()
    if not Frame:IsDescendantOf(ScreenGui) then
        BlurEffect:Destroy()
    end
end)

-- File
if isfile("DontShowAgain.txt") then
    local value = readfile("DontShowAgain.txt")
    if value == "1" then
        ScreenGui:Destroy()
    end
end

local function checkGuiExists()
    local player = game.Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")
    return playerGui:FindFirstChild("HyCMDs") ~= nil
end

local function showInitialNotification()
    local starterGui = game:GetService("StarterGui")

    starterGui:SetCore("SendNotification", {
        Title = "Script Executed";
        Text = "The script has been executed successfully.";
        Duration = 5; 
    })
end

local function showAlreadyExecutedNotification()
    local starterGui = game:GetService("StarterGui")

    starterGui:SetCore("SendNotification", {
        Title = "Script is Already Executed!";
        Text = "Please re-join and execute again or Type command: DeleteHyCMDs and execute again!.";
        Duration = 5; 
    })
end

local function checkAndNotify()
    if not checkGuiExists() then
        showInitialNotification()
    else
        showAlreadyExecutedNotification()
    end
end

checkAndNotify()

local function showInviteNotification()
    local starterGui = game:GetService("StarterGui")

    starterGui:SetCore("SendNotification", {
        Title = "It's being fixed now!";
        Text = "This script is not organized and may cause lag or errors! You can enter the help command to join!";
        Duration = 5; 
        Button1 = "Ok";
        Callback = function(result)
            if result == Enum.NotificationButtonState[1] then
            end
        end
    })
end

showInviteNotification()

--Cmd!
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
local textBox = Instance.new("TextBox")
local executeButton = Instance.new("TextButton")
local loadingLabel = Instance.new("TextLabel")
local progressBar = Instance.new("Frame")

screenGui.Name = "HyCMDs"
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

textBox.Parent = screenGui
textBox.Position = UDim2.new(0, 10, 0, 50)
textBox.Size = UDim2.new(0, 200, 0, 50)
textBox.Text = ""
textBox.PlaceholderText = "Enter Command Here!"
textBox.ClearTextOnFocus = false
textBox.BackgroundColor3 = Color3.fromRGB(53, 53, 53)
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.BorderSizePixel = 0

executeButton.Parent = screenGui
executeButton.Position = UDim2.new(0, 220, 0, 50)
executeButton.Size = UDim2.new(0, 100, 0, 50)
executeButton.Text = "Execute"
executeButton.BackgroundColor3 = Color3.fromRGB(73, 73, 73)
executeButton.TextColor3 = Color3.fromRGB(255, 255, 255)

progressBar.Parent = screenGui
progressBar.Position = UDim2.new(0, 10, 1, -60)
progressBar.Size = UDim2.new(0, 200, 0, 10)
progressBar.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
progressBar.BorderSizePixel = 0

local loadingBar = Instance.new("Frame")
loadingBar.Parent = progressBar
loadingBar.Size = UDim2.new(0, 0, 1, 0)
loadingBar.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
loadingBar.BorderSizePixel = 0

loadingLabel.Parent = screenGui
loadingLabel.Position = UDim2.new(0, 10, 1, -70)
loadingLabel.Size = UDim2.new(0, 200, 0, 20)
loadingLabel.Text = "Loading..."
loadingLabel.TextColor3 = Color3.fromRGB(0, 0, 0)

local function animateTextBox()
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut, -1, true)
    local goal = { BackgroundColor3 = Color3.fromRGB(200, 200, 200) }
    local tween = TweenService:Create(textBox, tweenInfo, goal)
    tween:Play()
end

local function split(str, sep)
    local fields = {}
    local pattern = string.format("([^%s]+)", sep)
    str:gsub(pattern, function(c) fields[#fields + 1] = c end)
    return fields
end
local function findPlayer(name)
    local bestMatch = nil
    local shortestDistance = math.huge
    for _, player in ipairs(Players:GetPlayers()) do
        local distance = string.len(player.Name) - string.len(name)
        if distance < shortestDistance and player.Name:lower():find(name:lower(), 1, true) then
            bestMatch = player
            shortestDistance = distance
        end
    end
    return bestMatch
end

local commands = {
    ["hello"] = function()
        print("hello")
    end,

    ["freeze"] = function(targetName)
        local targetPlayer
        if targetName == "all" then
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer then
                    targetPlayer = player
                    if targetPlayer and targetPlayer.Character then
                        local character = targetPlayer.Character
                        for _, part in pairs(character:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.Anchored = true
                            end
                        end
                    end
                end
            end
        elseif targetName == "friend" then
        elseif targetName == "team" then
        elseif targetName == "me" or targetName == "" then
            targetPlayer = LocalPlayer
        else
            targetPlayer = findPlayer(targetName)
        end

        if targetPlayer and targetPlayer.Character then
            local character = targetPlayer.Character
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Anchored = true
                end
            end
        end
    end,

    ["unfreeze"] = function(targetName)
        local targetPlayer
        if targetName == "all" then
            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer then
                    targetPlayer = player
                    if targetPlayer and targetPlayer.Character then
                        local character = targetPlayer.Character
                        for _, part in pairs(character:GetDescendants()) do
                            if part:IsA("BasePart") then
                                part.Anchored = false
                            end
                        end
                    end
                end
            end
        elseif targetName == "friend" then
        elseif targetName == "team" then
        elseif targetName == "me" or targetName == "" then
            targetPlayer = LocalPlayer
        else
            targetPlayer = findPlayer(targetName)
        end

        if targetPlayer and targetPlayer.Character then
            local character = targetPlayer.Character
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.Anchored = false
                end
            end
        end
    end,

["speed"] = function(speed)
    local player = Players.LocalPlayer
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = tonumber(speed) or 16
        end
    end
end,

["jumppower"] = function(power)
    local player = Players.LocalPlayer
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.JumpPower = tonumber(power) or 50
        end
    end
end,

["fov"] = function(value)
    local camera = workspace.CurrentCamera
    local newFov = tonumber(value)
    
    if newFov and newFov >= 1 and newFov <= 120 then
        camera.FieldOfView = newFov
    else
        print("invalid Fov value!. Invalid value, must be from 1 to 120.")
    end
end,

["reset"] = function()
    local player = Players.LocalPlayer
    if player and player.Character then
        player.Character:BreakJoints()
    end
end,

["exit"] = function()
    game:Shutdown()
end,

["day"] = function()
    local lighting = game:GetService("Lighting")
    lighting.TimeOfDay = "14:00:00"  
end,

["night"] = function()
    local lighting = game:GetService("Lighting")
    lighting.TimeOfDay = "00:00:00"  
end,

["sit"] = function()
    local player = game.Players.LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.Sit = true
    end
end,

["say"] = function(message)
    game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(message, "All")
end,

["hideguis"] = function()
    local player = game.Players.LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui then
        for _, gui in pairs(playerGui:GetChildren()) do
            if gui:IsA("GuiBase2d") and gui.Name ~= "HyCMDs" then
                gui.Enabled = false
            end
        end
    end
end,

["unhideguis"] = function()
    local player = game.Players.LocalPlayer
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui then
        for _, gui in pairs(playerGui:GetChildren()) do
            if gui:IsA("GuiBase2d") and gui.Name ~= "HyCMDs" then
                gui.Enabled = true
            end
        end
    end
end,

["deletealltools"] = function()
    local backpack = game.Players.LocalPlayer.Backpack
    for _, item in ipairs(backpack:GetChildren()) do
        if item:IsA("Tool") then
            item:Destroy()
        end
    end
end,

["givedevtool"] = function()
    local player = game.Players.LocalPlayer
    local devTool = Instance.new("Tool")
    devTool.Name = "DevTool"
    devTool.Parent = player.Backpack
end,

["noarms"] = function()
    local character = game.Players.LocalPlayer.Character
    if character then
        local leftArm = character:FindFirstChild("Left Arm") or character:FindFirstChild("LeftHand")
        local rightArm = character:FindFirstChild("Right Arm") or character:FindFirstChild("RightHand")
        
        if leftArm then leftArm:Destroy() end
        if rightArm then rightArm:Destroy() end
    end
end,

["nolegs"] = function()
    local character = game.Players.LocalPlayer.Character
    if character then
        local leftLeg = character:FindFirstChild("Left Leg") or character:FindFirstChild("LeftFoot")
        local rightLeg = character:FindFirstChild("Right Leg") or character:FindFirstChild("RightFoot")
        
        if leftLeg then leftLeg:Destroy() end
        if rightLeg then rightLeg:Destroy() end
    end
end,

["fullbright"] = function()
    game.Lighting.Brightness = 2
    game.Lighting.Ambient = Color3.fromRGB(255, 255, 255)
    game.Lighting.FogEnd = 1e9
end,

["fb"] = function()
    game.Lighting.Brightness = 2
    game.Lighting.Ambient = Color3.fromRGB(255, 255, 255)
    game.Lighting.FogEnd = 1e9
end,

["serverhop"] = function()
    local TeleportService = game:GetService("TeleportService")
    local placeId = game.PlaceId
    TeleportService:Teleport(placeId, game.Players.LocalPlayer)
end,

["shop"] = function()
    local TeleportService = game:GetService("TeleportService")
    local placeId = game.PlaceId
    TeleportService:Teleport(placeId, game.Players.LocalPlayer)
end,

["rejoin"] = function()
    local TeleportService = game:GetService("TeleportService")
    local placeId = game.PlaceId
    local jobId = game.JobId
    TeleportService:TeleportToPlaceInstance(placeId, jobId, game.Players.LocalPlayer)
end,

["rj"] = function()
    local TeleportService = game:GetService("TeleportService")
    local placeId = game.PlaceId
    local jobId = game.JobId
    TeleportService:TeleportToPlaceInstance(placeId, jobId, game.Players.LocalPlayer)
end,

["gravity"] = function(value)
    workspace.Gravity = tonumber(value) or 196.2 -- Default gravity in Roblox
end,

["grav"] = function(value)
    workspace.Gravity = tonumber(value) or 196.2
end,

["kick"] = function(reason)
    local player = game.Players.LocalPlayer
    if player then
        player:Kick(reason or "No reason provided.")
    end
end,

["voidreset"] = function()
    local player = game.Players.LocalPlayer
    local character = player.Character

    if character then
        character:SetPrimaryPartCFrame(CFrame.new(0, -200, 0))
        wait(0.1)
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.Health = 0
        end
    end
end,

["noroot"] = function()
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character:FindFirstChild("HumanoidRootPart"):Destroy()
    end
end,

["godmode"] = function()
    local character = game.Players.LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.MaxHealth = math.huge
            humanoid.Health = math.huge
        end
    end
end,

["deleteplayers"] = function()
    local playerFolder = game.Players.LocalPlayer
    if playerFolder then
        playerFolder:Destroy()
    end
end,

["antilag"] = function()
    local settings = game:GetService("Lighting")
    settings.GlobalShadows = false
    settings.FogEnd = 9e9
    settings.Brightness = 0

    for _, effect in pairs(settings:GetChildren()) do
        if effect:IsA("PostEffect") then
            effect.Enabled = false
        end
    end

    for _, object in pairs(workspace:GetDescendants()) do
        if object:IsA("Part") or object:IsA("MeshPart") or object:IsA("UnionOperation") then
            object.Material = Enum.Material.SmoothPlastic
            object.Reflectance = 0
        end
    end

    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("Script") or v:IsA("LocalScript") then
            v.Disabled = true
        end
    end

    local player = game.Players.LocalPlayer
    if player and player:FindFirstChild("PlayerScripts") then
        local playerScripts = player:FindFirstChild("PlayerScripts")
        playerScripts.CameraMaxZoomDistance = 50 -- Điều chỉnh khoảng cách render
    end

    print("Lag reduction mode is not good, you can ask me questions through the forum!.")
end,

["nohead"] = function()
    local player = game.Players.LocalPlayer
    if player.Character and player.Character:FindFirstChild("Head") then
        player.Character.Head:Destroy()
    end
end,

["teleportalltome"] = function()
    local player = game.Players.LocalPlayer
    local myPosition = player.Character and player.Character.PrimaryPart and player.Character.PrimaryPart.Position
    if myPosition then
        for _, otherPlayer in pairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character.PrimaryPart then
                otherPlayer.Character:SetPrimaryPartCFrame(CFrame.new(myPosition))
            end
        end
    end
end,

["health"] = function(value)
    local player = Players.LocalPlayer
    if player and player.Character then
        local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.Health = tonumber(value) or humanoid.Health
        end
    end
end,

["fog"] = function(value)
    local lighting = game:GetService("Lighting")
    local newFogEnd = tonumber(value) or 1000
    lighting.FogEnd = newFogEnd
end,

["autoheal"] = function(healRate)
    healRate = tonumber(healRate) or 10
    local player = game.Players.LocalPlayer
    if player and player.Character then
        local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            while true do
                if humanoid.Health < humanoid.MaxHealth then
                    humanoid.Health = math.min(humanoid.Health + healRate, humanoid.MaxHealth)
                end
                wait(0.0001)
            end
        end
    end
end,

["freecam"] = function()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if character and character:FindFirstChildOfClass("Humanoid") then
        local camera = workspace.CurrentCamera
        if not camera:FindFirstChild("Freecam") then
            local freecam = Instance.new("Model")
            freecam.Name = "Freecam"
            freecam.Parent = camera
            
            local camPart = Instance.new("Part")
            camPart.Name = "CameraPart"
            camPart.Anchored = true
            camPart.CanCollide = false
            camPart.Size = Vector3.new(1,1,1)
            camPart.Position = camera.CFrame.Position
            camPart.Parent = freecam
            
            camera.CameraSubject = camPart
            camera.CameraType = Enum.CameraType.Scriptable
        end
    end
end,

["unfreecam"] = function()
    local player = game.Players.LocalPlayer
    local camera = workspace.CurrentCamera
    local freecam = camera:FindFirstChild("Freecam")
    if freecam then
        camera.CameraSubject = player.Character:FindFirstChildOfClass("Humanoid")
        camera.CameraType = Enum.CameraType.Custom
        freecam:Destroy()
    end
end,

["noanimation"] = function()
    local character = game.Players.LocalPlayer.Character
    if character then
        for _,anim in pairs(character:FindFirstChildOfClass("Humanoid"):GetPlayingAnimationTracks()) do
            anim:Stop()
        end
    end
end,

["healspeed"] = function(value)
    local humanoid = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.Health = humanoid.Health + value
    end
end,

["maxhealth"] = function(value)
    local humanoid = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.MaxHealth = value
        humanoid.Health = math.min(humanoid.Health, value)
    end
end,

["autohealthloss"] = function(value)
    local player = game.Players.LocalPlayer
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")
    
    if humanoid then
        while true do
            wait(0.1)
            humanoid.Health = humanoid.Health - value
        end
    end
end,

["atl"] = function(value)
    local player = game.Players.LocalPlayer
    local character = player.Character
    local humanoid = character and character:FindFirstChildOfClass("Humanoid")
    
    if humanoid then
        while true do
            wait(0.1)
            humanoid.Health = humanoid.Health - value
        end
    end
end,

["info"] = function()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "InfoGUI"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.5, 0, 0.5, 0)
    mainFrame.Position = UDim2.new(0.25, 0, 0.25, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    mainFrame.BorderSizePixel = 0
    mainFrame.Parent = screenGui

    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Size = UDim2.new(1, 0, 1, -50)
    scrollFrame.Position = UDim2.new(0, 0, 0, 0)
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 50)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.Parent = mainFrame

    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, -10, 0, 10000)
    infoLabel.Position = UDim2.new(0, 5, 0, 5)
    infoLabel.Text = [[
                                                    info:
Version: Beta: 1
Name Script: HyCMDs
Creators: ACE1991ACE
THANK FOR USE MY SCRIPT ^^
    ]]
    infoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    infoLabel.BackgroundTransparency = 1
    infoLabel.TextXAlignment = Enum.TextXAlignment.Left
    infoLabel.TextYAlignment = Enum.TextYAlignment.Top
    infoLabel.Parent = scrollFrame
    infoLabel.TextSize = 10

    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 100, 0, 50)
    closeButton.Position = UDim2.new(1, -110, 1, -60)
    closeButton.Text = "Close"
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.Parent = mainFrame

    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)
end,

["invisible"] = function()
    local character = game.Players.LocalPlayer.Character
    if character then
        for _, part in ipairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.Transparency = 1
                part.CanCollide = false
            end
        end
    end
end,

["deletehycmds"] = function()
    local playerGui = game.Players.LocalPlayer:FindFirstChildOfClass("PlayerGui")
    if playerGui then
        for _, gui in ipairs(playerGui:GetChildren()) do
            if gui.Name == "HyCMDs" then
                gui:Destroy()
            end
        end
    end
end,

["btools"] = function()
    local success, result = pcall(function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-BTools-12430"))()
    end)
    
    if not success then
        warn("Download failed!: " .. result)
    end
end,

["time"] = function(timeString)
    local hours, minutes, seconds = timeString:match("^(%d+):(%d+):(%d+)$")
    if hours and minutes and seconds then
        game.Lighting.TimeOfDay = string.format("%02d:%02d:%02d", hours, minutes, seconds)
        print("Thời gian trong game đã được đặt thành: " .. game.Lighting.TimeOfDay)
    else
        warn("00:00:00 is true!")
    end
end,

["hatsize"] = function(size)
    local player = game.Players.LocalPlayer
    local character = player.Character

    if not character then
        warn("...")
        return
    end

    local targetSize = tonumber(size)

    if not targetSize then
        warn("Please enter right value!.")
        return
    end

    local hat = character:FindFirstChildOfClass("Accessory")
    if hat then
        local handle = hat:FindFirstChild("Handle")
        if handle then
            handle.Size = Vector3.new(targetSize, targetSize, targetSize)
            local head = character:FindFirstChild("Head")
            if head then
                -- Cập nhật CFrame của mũ để giữ nó ngay tại cổ
                handle.CFrame = head.CFrame * CFrame.new(0, -head.Size.Y / 2 - handle.Size.Y / 2, 0)
            end
        end
    else
        warn("I cant find hat.")
    end

    print("Size: " .. tostring(targetSize))
end,

["headsize"] = function(size)
    local player = game.Players.LocalPlayer
    local character = player.Character
    
    if not character then
        warn("...")
        return
    end
    
    local targetSize = tonumber(size)
    
    if not targetSize then
        warn("Please enter right value.")
        return
    end

    local head = character:FindFirstChild("Head")
    if head then
        head.Size = Vector3.new(targetSize, targetSize, targetSize)
    end

    -- Thay đổi kích thước mũ nếu có
    local hat = character:FindFirstChildOfClass("Accessory")
    if hat then
        local handle = hat:FindFirstChild("Handle")
        if handle then
            handle.Size = Vector3.new(targetSize, targetSize, targetSize)
        end
    end
    
    print("Kích thước đầu của bạn đã được thay đổi thành: " .. tostring(targetSize))
end,

["allpartinuncollide"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and not part.CanCollide then
            part.CanCollide = true
        end
    end
    print("Tất cả các part không va chạm đã được chuyển sang va chạm.")
end,

["apiuc"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") and not part.CanCollide then
            part.CanCollide = true
        end
    end
    print("Tất cả các part không va chạm đã được chuyển sang va chạm.")
end,

["uninvisiblepart"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 0
        end
    end
    print("Tất cả các part đã được phục hồi hiển thị.")
end,

["uninvpart"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 0
        end
    end
    print("Tất cả các part đã được phục hồi hiển thị.")
end,

["invisiblepart"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 1
        end
    end
    print("Tất cả các part đã được làm tàng hình.")
end,

["invpart"] = function()
    for _, part in ipairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Transparency = 1
        end
    end
    print("Tất cả các part đã được làm tàng hình.")
end,

["addtools"] = function(name_carryable_display_color)
    local players = game:GetService("Players")
    local localPlayer = players.LocalPlayer
    local backpack = localPlayer:FindFirstChildOfClass("Backpack")

    if backpack then
        -- Parse the input parameters
        local split = string.split(name_carryable_display_color, "_")
        local toolName = split[1]:gsub("#2d", " ")  -- Replace #2d with actual space
        local carryable = split[2] == "True"
        local displayPart = split[3] == "True"
        local color = split[4]

        -- Create the new tool
        local tool = Instance.new("Tool")
        tool.Name = toolName
        tool.RequiresHandle = carryable
        tool.CanBeDropped = carryable
        tool.Parent = backpack

        -- Optionally create the display part
        if displayPart then
            local handle = Instance.new("Part")
            handle.Size = Vector3.new(1, 1, 1)
            handle.Color = BrickColor.new(color).Color
            handle.Name = "Handle"
            handle.Parent = tool
            tool.GripPos = Vector3.new(0, -0.5, 0)
        end

        print("Đã tạo công cụ mới: " .. toolName)
    else
        print("Không tìm thấy ba lô của người chơi.")
    end
end,

["copytools"] = function(target)
    local players = game:GetService("Players")
    local localPlayer = players.LocalPlayer
    local targetPlayer = nil

    if target:lower() == "me" then
        targetPlayer = localPlayer
    else
        for _, player in ipairs(players:GetPlayers()) do
            if player.Name:lower():find(target:lower()) or player.DisplayName:lower():find(target:lower()) then
                targetPlayer = player
                break
            end
        end
    end

    if targetPlayer then
        local backpack = localPlayer:FindFirstChildOfClass("Backpack")
        local targetBackpack = targetPlayer:FindFirstChildOfClass("Backpack")
        
        if backpack and targetBackpack then
            for _, tool in ipairs(targetBackpack:GetChildren()) do
                if tool:IsA("Tool") then
                    tool:Clone().Parent = backpack
                end
            end
            print("Đã sao chép tất cả công cụ từ " .. targetPlayer.Name .. ".")
        end
    else
        print("Không tìm thấy người chơi với tên hoặc tên hiển thị gần đúng là '" .. target .. "'.")
    end
end,

-- Lệnh Goto
["goto"] = function(targetPlayer)
    local localPlayer = game.Players.LocalPlayer
    local target = getPlayer(targetPlayer)
    if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
        localPlayer.Character.HumanoidRootPart.CFrame = target.Character.HumanoidRootPart.CFrame
    end
end,

-- Lệnh AutoMissed
["automissed"] = function()
    local localPlayer = game.Players.LocalPlayer
    if not _G.autoMissedConnection then
        _G.autoMissedConnection = game:GetService("RunService").Heartbeat:Connect(function()
            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local distance = (player.Character.HumanoidRootPart.Position - localPlayer.Character.HumanoidRootPart.Position).Magnitude
                    if distance < 10 and distance > 5 then
                        local newPosition = localPlayer.Character.HumanoidRootPart.Position + Vector3.new(math.random(-10,10), 0, math.random(-10,10))
                        localPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(newPosition)
                    end
                end
            end
        end)
    end
end,

-- Lệnh UnAutoMissed
["unautomissed"] = function()
    if _G.autoMissedConnection then
        _G.autoMissedConnection:Disconnect()
        _G.autoMissedConnection = nil
    end
end,

-- Lệnh Unfreecam2
["unfreecam2"] = function()
    -- Ngắt kết nối script Freecam2
    local freecamScript = game.Workspace:FindFirstChild("FreecamScript") or game.Players.LocalPlayer.PlayerScripts:FindFirstChild("FreecamScript")
    if freecamScript then
        freecamScript:Destroy()
    end

    -- Đảm bảo nhân vật không còn bị đóng băng
    local character = game.Players.LocalPlayer.Character
    if character then
        for _, part in ipairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.Anchored = false
            end
        end
    end

    -- Đặt lại camera để có thể nhìn xung quanh
    local cam = workspace.CurrentCamera
    cam.CameraType = Enum.CameraType.Custom
end,

-- Lệnh Freecam2
["freecam2"] = function()
    local cam = workspace.CurrentCamera
    local UIS = game:GetService("UserInputService")
    local RS = game:GetService("RunService")
    local onMobile = not UIS.KeyboardEnabled
    local keysDown = {}
    local rotating = false

    if not game:IsLoaded() then game.Loaded:Wait() end

    cam.CameraType = Enum.CameraType.Scriptable

    local speed = 5
    local sens = .3
    speed /= 10
    if onMobile then sens *= 2 end

    -- Đóng băng nhân vật
    local character = game.Players.LocalPlayer.Character
    if character then
        for _, part in ipairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.Anchored = true
            end
        end
    end

    local function renderStepped()
        if rotating then
            local delta = UIS:GetMouseDelta()
            local cf = cam.CFrame
            local yAngle = cf:ToEulerAnglesXYZ()
            local newAmount = math.deg(yAngle) + delta.Y
            if newAmount > 65 or newAmount < -65 then
                if not (yAngle < 0 and delta.Y < 0) and not (yAngle > 0 and delta.Y > 0) then
                    delta = Vector2.new(delta.X, 0)
                end
            end
            cf *= CFrame.Angles(-math.rad(delta.Y), 0, 0)
            cf = CFrame.Angles(0, -math.rad(delta.X), 0) * (cf - cf.Position) + cf.Position
            cf = CFrame.lookAt(cf.Position, cf.Position + cf.LookVector)
            if delta ~= Vector2.new(0, 0) then cam.CFrame = cam.CFrame:Lerp(cf, sens) end
            UIS.MouseBehavior = Enum.MouseBehavior.LockCurrentPosition
        else
            UIS.MouseBehavior = Enum.MouseBehavior.Default
        end

        if keysDown["Enum.KeyCode.W"] then
            cam.CFrame *= CFrame.new(Vector3.new(0, 0, -speed))
        end
        if keysDown["Enum.KeyCode.A"] then
            cam.CFrame *= CFrame.new(Vector3.new(-speed, 0, 0))
        end
        if keysDown["Enum.KeyCode.S"] then
            cam.CFrame *= CFrame.new(Vector3.new(0, 0, speed))
        end
        if keysDown["Enum.KeyCode.D"] then
            cam.CFrame *= CFrame.new(Vector3.new(speed, 0, 0))
        end
    end

    RS.RenderStepped:Connect(renderStepped)

    local validKeys = {"Enum.KeyCode.W", "Enum.KeyCode.A", "Enum.KeyCode.S", "Enum.KeyCode.D"}

    UIS.InputBegan:Connect(function(Input)
        for _, key in pairs(validKeys) do
            if key == tostring(Input.KeyCode) then
                keysDown[key] = true
            end
        end
        if Input.UserInputType == Enum.UserInputType.MouseButton2 or (Input.UserInputType == Enum.UserInputType.Touch and UIS:GetMouseLocation().X > (cam.ViewportSize.X / 2)) then
            rotating = true
        end
        if Input.UserInputType == Enum.UserInputType.Touch then
            if Input.Position.X < cam.ViewportSize.X / 2 then
                touchPos = Input.Position
            end
        end
    end)

    UIS.InputEnded:Connect(function(Input)
        for key, v in pairs(keysDown) do
            if key == tostring(Input.KeyCode) then
                keysDown[key] = false
            end
        end
        if Input.UserInputType == Enum.UserInputType.MouseButton2 or (Input.UserInputType == Enum.UserInputType.Touch and UIS:GetMouseLocation().X > (cam.ViewportSize.X / 2)) then
            rotating = false
        end
        if Input.UserInputType == Enum.UserInputType.Touch and touchPos then
            if Input.Position.X < cam.ViewportSize.X / 2 then
                touchPos = nil
                keysDown["Enum.KeyCode.W"] = false
                keysDown["Enum.KeyCode.A"] = false
                keysDown["Enum.KeyCode.S"] = false
                keysDown["Enum.KeyCode.D"] = false
            end
        end
    end)

    UIS.TouchMoved:Connect(function(input)
        if touchPos then
            if input.Position.X < cam.ViewportSize.X / 2 then
                if input.Position.Y < touchPos.Y then
                    keysDown["Enum.KeyCode.W"] = true
                    keysDown["Enum.KeyCode.S"] = false
                else
                    keysDown["Enum.KeyCode.W"] = false
                    keysDown["Enum.KeyCode.S"] = true
                end
                if input.Position.X < (touchPos.X - 15) then
                    keysDown["Enum.KeyCode.A"] = true
                    keysDown["Enum.KeyCode.D"] = false
                elseif input.Position.X > (touchPos.X + 15) then
                    keysDown["Enum.KeyCode.A"] = false
                    keysDown["Enum.KeyCode.D"] = true
                else
                    keysDown["Enum.KeyCode.A"] = false
                    keysDown["Enum.KeyCode.D"] = false
                end
            end
        end
    end)

local player = game.Players.LocalPlayer
local camera = game.Workspace.CurrentCamera

function deleteCamera()
    camera:Destroy()
end

function restoreCamera()
    camera = Instance.new("Camera")
    camera.Parent = game.Workspace
    game.Workspace.CurrentCamera = camera
    camera.CameraType = Enum.CameraType.Custom
    camera.CameraSubject = player.Character.Humanoid
end

deleteCamera()
restoreCamera()
end,

["fixcam"] = function()
    local player = game.Players.LocalPlayer
local camera = game.Workspace.CurrentCamera

function deleteCamera()
    camera:Destroy()
end

function restoreCamera()
    camera = Instance.new("Camera")
    camera.Parent = game.Workspace
    game.Workspace.CurrentCamera = camera
    camera.CameraType = Enum.CameraType.Custom
    camera.CameraSubject = player.Character.Humanoid
end

deleteCamera()
restoreCamera()
end,

["tptool"] = function()
loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Teleport-tool-7095"))()
end,

["smoothcamera"] = function()
loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Smooth-3rd-Person-Camera-7413"))()
end,

["antishakecamera"] = function()
    local cam = workspace.CurrentCamera
    if not cam:FindFirstChild("AntiShake") then
        local antiShake = Instance.new("BodyGyro")
        antiShake.Name = "AntiShake"
        antiShake.Parent = cam
        antiShake.MaxTorque = Vector3.new(4000, 4000, 4000)
        antiShake.CFrame = cam.CFrame
        antiShake.P = 10000
        antiShake.D = 5000
        antiShake.CFrame = cam.CFrame
    end
end,

["antishcam"] = function()
    local cam = workspace.CurrentCamera
    if not cam:FindFirstChild("AntiShake") then
        local antiShake = Instance.new("BodyGyro")
        antiShake.Name = "AntiShake"
        antiShake.Parent = cam
        antiShake.MaxTorque = Vector3.new(4000, 4000, 4000)
        antiShake.CFrame = cam.CFrame
        antiShake.P = 10000
        antiShake.D = 5000
        antiShake.CFrame = cam.CFrame
    end
end,

["worldrgb"] = function(speed)
    local player = game.Players.LocalPlayer
    local runService = game:GetService("RunService")
    local colorIndex = 0
    local colors = {
        Color3.fromRGB(255, 0, 0),   -- Đỏ
        Color3.fromRGB(255, 165, 0), -- Cam
        Color3.fromRGB(255, 255, 0), -- Vàng
        Color3.fromRGB(0, 255, 0),   -- Xanh lá
        Color3.fromRGB(0, 0, 255),   -- Xanh dương
        Color3.fromRGB(75, 0, 130),  -- Chàm
        Color3.fromRGB(238, 130, 238) -- Tím
    }

    local function changeColor()
        colorIndex = (colorIndex % #colors) + 1
        for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Color = colors[colorIndex]
            end
        end
    end

    player:SetAttribute("WorldRGBActive", true)

    runService:BindToRenderStep("WorldRGB", 0, function()
        if player:GetAttribute("WorldRGBActive") then
            changeColor()
            wait(speed)
        else
            runService:UnbindFromRenderStep("WorldRGB")
        end
    end)
end,

["unworldrgb"] = function()
    local player = game.Players.LocalPlayer
    player:SetAttribute("WorldRGBActive", false)

    -- Đặt lại màu mặc định cho tất cả các part trong workspace
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Color = part.BrickColor.Color
        end
    end
end,

["unesp"] = function()
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player.Character then
            for _, child in ipairs(player.Character:GetChildren()) do
                if child:IsA("Highlight") then
                    child:Destroy()
                end
            end
        end
    end
    
    print("ESP disabled.")
end,

["esp"] = function()
    local function createESP(player)
        local highlight = Instance.new("Highlight")
        highlight.Adornee = player.Character
        highlight.FillTransparency = 1
        highlight.OutlineColor = Color3.fromRGB(255, 0, 0)  -- Màu viền (đỏ)
        highlight.Parent = player.Character
    end

    -- Áp dụng ESP cho tất cả các người chơi hiện tại
    for _, player in ipairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer and player.Character then
            createESP(player)
        end
    end

    -- Áp dụng ESP cho bất kỳ người chơi mới nào tham gia
    game.Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function()
            createESP(player)
        end)
    end)
    
    print("ESP enabled.")
end,

["disable"] = function(feature)
    local coreGui = game:GetService("StarterGui")

    if feature == "health" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Health, false)
    elseif feature == "inventory" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, false)
    elseif feature == "emote" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, false)
    elseif feature == "reset" then
        coreGui:SetCore("ResetButtonCallback", false)
    elseif feature == "playerlist" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, false)
    elseif feature == "chat" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)
    else
        warn("Invalid feature specified.")
    end

    print(feature .. " disabled.")
end,

["enable"] = function(feature)
    local coreGui = game:GetService("StarterGui")

    if feature == "health" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Health, true)
    elseif feature == "inventory" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Backpack, true)
    elseif feature == "emote" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.EmotesMenu, true)
    elseif feature == "reset" then
        coreGui:SetCore("ResetButtonCallback", true)
    elseif feature == "playerlist" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, true)
    elseif feature == "chat" then
        coreGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, true)
    else
        warn("Invalid feature specified.")
    end

    print(feature .. " enabled.")
end,

["kill"] = function(target)
    local players = game:GetService("Players")

    local function killPlayer(player)
        if player and player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.Health = 0
        end
    end

    if target == "all" then
        for _, player in ipairs(players:GetPlayers()) do
            killPlayer(player)
        end
    elseif target == "me" then
        killPlayer(players.LocalPlayer)
    elseif target == "team" then
        local team = players.LocalPlayer.Team
        for _, player in ipairs(players:GetPlayers()) do
            if player.Team == team then
                killPlayer(player)
            end
        end
    elseif target == "friend" then
        for _, player in ipairs(players:GetPlayers()) do
            if player:IsFriendsWith(players.LocalPlayer.UserId) then
                killPlayer(player)
            end
        end
    else
        for _, player in ipairs(players:GetPlayers()) do
            if player.Name:lower():find(target:lower()) or player.DisplayName:lower():find(target:lower()) then
                killPlayer(player)
            end
        end
    end

    print("Executed kill command on target: " .. target)
end,

["execute"] = function(script)
    -- Phân tách các lệnh bằng ký tự xuống dòng hoặc dấu #1s
    local commands = string.split(script, "#1s")

    for _, cmd in ipairs(commands) do
        if cmd ~= "" then
            local success, err = pcall(function()
                -- Thực thi từng lệnh
                loadstring(cmd)()
            end)
            if not success then
                print("Lỗi khi thực thi lệnh: " .. err)
            end

            -- Nếu có dấu #1s, chờ 1 giây trước khi thực thi lệnh tiếp theo
            wait(0)
        end
    end
end,

["delete"] = function(itemName)
    -- Hàm đệ quy để tìm và xóa phần tử trong toàn bộ cây thư mục
    local function deleteItemRecursively(folder, name, path)
        for _, item in pairs(folder:GetChildren()) do
            local currentPath = path .. " > " .. item.Name
            
            if item.Name:lower() == name:lower() then
                item:Destroy()
                print("Deleted: " .. currentPath)
                return true
            end

            -- Nếu item là một folder hoặc object chứa con, tìm trong folder con
            if item:IsA("Folder") or item:IsA("Model") or item:IsA("ScreenGui") or item:IsA("Frame") or item:IsA("Tool") then
                local success = deleteItemRecursively(item, name, currentPath)
                if success then return true end
            end
        end
        return false
    end

    -- Tìm và xóa phần tử trong Workspace, Players, Lighting, etc.
    local success = deleteItemRecursively(workspace, itemName, "Workspace")
    if not success then
        success = deleteItemRecursively(game.Players, itemName, "Players")
    end
    if not success then
        success = deleteItemRecursively(game.Lighting, itemName, "Lighting")
    end
    if not success then
        success = deleteItemRecursively(game.ReplicatedStorage, itemName, "ReplicatedStorage")
    end
    if not success then
        success = deleteItemRecursively(game.ServerStorage, itemName, "ServerStorage")
    end
    if not success then
        print("Could not find: " .. itemName .. " in the entire game.")
    end
end,

["walk"] = function(params)
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local hrp = character:WaitForChild("HumanoidRootPart")

    -- Hàm di chuyển theo hướng
    local function walkInDirection(direction, studs)
        local moveVector = Vector3.new(0, 0, 0)
        
        if direction == "up" then
            moveVector = hrp.CFrame.lookVector * studs
        elseif direction == "down" then
            moveVector = -hrp.CFrame.lookVector * studs
        elseif direction == "left" then
            moveVector = -hrp.CFrame.rightVector * studs
        elseif direction == "right" then
            moveVector = hrp.CFrame.rightVector * studs
        end
        
        -- Tính toán vị trí mới
        local newPosition = hrp.Position + moveVector
        humanoid:MoveTo(newPosition)
        humanoid.MoveToFinished:Wait() -- Chờ di chuyển hoàn thành
    end

    -- Phân tích cú pháp đầu vào
    for command in string.gmatch(params, "%w+:%d+") do
        local direction, studs = string.match(command, "(%w+):(%d+)")
        studs = tonumber(studs)
        if direction and studs then
            walkInDirection(direction:lower(), studs)
        end
    end

    -- In thông báo sau khi hoàn thành
    print("Done!")
end,

["owner"] = function()
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local hrp = character:WaitForChild("HumanoidRootPart")

    -- Bán kính mà hitbox sẽ mở rộng
    local radius = 500

    -- Tạo một Collider giả quanh nhân vật để mở rộng hitbox
    local function createHitbox()
        local hitbox = Instance.new("Part")
        hitbox.Name = "Hitbox"
        hitbox.Size = Vector3.new(radius * 2, radius * 2, radius * 2) -- Tạo hitbox lớn hơn
        hitbox.Position = hrp.Position
        hitbox.Anchored = true
        hitbox.CanCollide = false -- Đảm bảo không gây va chạm với các vật thể khác
        hitbox.Transparency = 1 -- Làm cho hitbox vô hình
        hitbox.Parent = workspace
        return hitbox
    end

    -- Xóa hitbox nếu đã tồn tại
    local existingHitbox = workspace:FindFirstChild("Hitbox")
    if existingHitbox then
        existingHitbox:Destroy()
    end

    -- Tạo hitbox mới
    local hitbox = createHitbox()

    -- In thông báo
    print("Hitbox expanded to cover a radius of " .. radius .. " studs!")
end,

["help"] = function()
    -- Lưu cụm từ "Please wait!" vào bộ nhớ tạm
    setclipboard("Please wait!")
    print("Help text copied to clipboard: Please wait!")
end,

["copyname"] = function(targetName)
    local players = game:GetService("Players")
    local player = players.LocalPlayer
    
    -- Tìm kiếm người chơi dựa trên tên hoặc các tiêu chí U2 khác
    local target = nil
    for _, plr in pairs(players:GetPlayers()) do
        if string.lower(plr.Name):find(string.lower(targetName)) or 
           string.lower(plr.DisplayName):find(string.lower(targetName)) or
           targetName == "all" or
           (targetName == "me" and plr == player) or
           (targetName == "team" and plr.Team == player.Team) or
           (targetName == "friend" and plr:IsFriendsWith(player.UserId)) then
            target = plr
            break
        end
    end

    -- Nếu tìm thấy người chơi, sao chép tên vào bộ nhớ tạm
    if target then
        -- Sử dụng API của hệ thống để sao chép vào bộ nhớ tạm
        setclipboard("@" .. target.Name)
        print("Copied name: @" .. target.Name)
    else
        print("Player not found!")
    end
end,

["textsize"] = function(size)
    -- Chuyển size sang dạng số
    local newSize = tonumber(size)
    if not newSize then
        print("Invalid size input. Please enter a number.")
        return
    end
    
    -- Hàm để thay đổi kích cỡ chữ cho tất cả các TextObject trong một GUI
    local function changeTextSizeInGui(gui)
        for _, obj in pairs(gui:GetDescendants()) do
            if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") then
                obj.TextSize = newSize
            end
        end
    end
    
    -- Thay đổi kích cỡ chữ trong PlayerGui của LocalPlayer
    local playerGui = game.Players.LocalPlayer:FindFirstChild("PlayerGui")
    if playerGui then
        changeTextSizeInGui(playerGui)
    end
    
    -- Thay đổi kích cỡ chữ trong CoreGui
    local coreGui = game:GetService("CoreGui")
    changeTextSizeInGui(coreGui)
    
    -- In thông báo thành công
    print("Text size changed to " .. newSize)
end,

["dienormal"] = function()
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Hàm để neo toàn bộ nhân vật và phụ kiện khi chết
local function onCharacterDied()
    -- Neo tất cả các phần của nhân vật
    for _, part in ipairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Anchored = true
        end
    end

    -- Neo tất cả các phụ kiện (mũ, quần áo, vv.)
    for _, accessory in ipairs(character:GetChildren()) do
        if accessory:IsA("Accessory") then
            accessory.Handle.Anchored = true
        end
    end

    -- Thêm trọng lực để tạo hiệu ứng đung đưa
    for _, part in ipairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Velocity = Vector3.new(0, -50, 0) -- Tạo trọng lực xuống để có cảm giác đung đưa
        end
    end
end

-- Kết nối hàm với sự kiện nhân vật chết
character:WaitForChild("Humanoid").Died:Connect(onCharacterDied)

-- Đảm bảo script tiếp tục áp dụng nếu nhân vật tái sinh
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    character:WaitForChild("Humanoid").Died:Connect(onCharacterDied)
end)
end,

["command"] = function()
    -- Create the ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "command2"
    screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

    -- Create the main Frame for the GUI
    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.5, 0, 0.6, 0)
    mainFrame.Position = UDim2.new(0.25, 0, 0.2, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    mainFrame.BorderSizePixel = 2
    mainFrame.BorderColor3 = Color3.fromRGB(80, 80, 80)
    mainFrame.Parent = screenGui

    -- Create the Search Box
    local searchBox = Instance.new("TextBox")
    searchBox.Size = UDim2.new(1, -140, 0, 40)
    searchBox.Position = UDim2.new(0, 10, 0, 10)
    searchBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    searchBox.PlaceholderText = "Search commands..."
    searchBox.ClearTextOnFocus = false
    searchBox.Text = ""
    searchBox.BorderSizePixel = 2
    searchBox.BorderColor3 = Color3.fromRGB(80, 80, 80)
    searchBox.Font = Enum.Font.SourceSans
    searchBox.TextSize = 14
    searchBox.Parent = mainFrame

    -- Create the Search Button
    local searchButton = Instance.new("TextButton")
    searchButton.Size = UDim2.new(0, 100, 0, 40)
    searchButton.Position = UDim2.new(1, -120, 0, 10)
    searchButton.Text = "Search"
    searchButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    searchButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    searchButton.BorderSizePixel = 2
    searchButton.BorderColor3 = Color3.fromRGB(80, 80, 80)
    searchButton.Font = Enum.Font.SourceSans
    searchButton.TextSize = 14
    searchButton.Parent = mainFrame

    -- Create the Scroll Frame for the buttons
    local scrollFrame = Instance.new("ScrollingFrame")
    scrollFrame.Size = UDim2.new(1, 0, 1, -130)
    scrollFrame.Position = UDim2.new(0, 0, 0, 60)
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 250)
    scrollFrame.BackgroundTransparency = 1
    scrollFrame.Parent = mainFrame

    -- Create a Frame for buttons
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Size = UDim2.new(1, 0, 0, 250)
    buttonFrame.Position = UDim2.new(0, 0, 0, 0)
    buttonFrame.BackgroundTransparency = 1
    buttonFrame.Parent = scrollFrame

    -- Create a TextLabel to show command details
    local detailLabel = Instance.new("TextLabel")
    detailLabel.Size = UDim2.new(1, 0, 0, 80)
    detailLabel.Position = UDim2.new(0, 0, 1, -80)
    detailLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    detailLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    detailLabel.TextSize = 14
    detailLabel.Text = ""
    detailLabel.TextWrapped = true
    detailLabel.Font = Enum.Font.SourceSans
    detailLabel.Parent = mainFrame

    -- Create the Close button for the detailLabel
    local closeButton = Instance.new("TextButton")
    closeButton.Size = UDim2.new(0, 100, 0, 50)
    closeButton.Position = UDim2.new(1, -110, 1, -60)
    closeButton.Text = "Close"
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
    closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeButton.BorderSizePixel = 2
    closeButton.BorderColor3 = Color3.fromRGB(80, 80, 80)
    closeButton.Font = Enum.Font.SourceSans
    closeButton.TextSize = 14
    closeButton.Parent = detailLabel

    -- Create the Sound instance
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://6655851046" -- Replace with your sound ID
    sound.Parent = mainFrame

    -- List of commands with their corresponding button text and description
    local commands = {
        {text = "FullBright/FB", description = "Light it all up!", command = "FullBright"},
        {text = "Speed [Value]", description = "Speed up!\nExample: Speed 50", command = "Speed 50"},
        {text = "Jumppower [Value]", description = "Makes you jump higher!\nExample: Jumppower 50", command = "Jumppower 75"},
        {text = "Freeze [Name]", description = "Freeze someone for guilt\nExample: Freeze {Me/Name}", command = "Freeze Me"},
        -- Add more commands as needed
    }

    -- Function to create a button
    local function createButton(text, description, command)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, -10, 0, 40)
        button.Position = UDim2.new(0, 5, 0, 5 + (40 * (#buttonFrame:GetChildren())))
        button.Text = text
        button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.BorderSizePixel = 2
        button.BorderColor3 = Color3.fromRGB(80, 80, 80)
        button.Font = Enum.Font.SourceSans
        button.TextSize = 14
        button.Parent = buttonFrame

        button.MouseButton1Click:Connect(function()
            sound:Play() -- Play sound when button is clicked
            detailLabel.Text = description
            local hyCmdsGui = game.Players.LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("HyCMDs")
            if hyCmdsGui then
                local textBox = hyCmdsGui:FindFirstChild("TextBox")
                if textBox then
                    textBox.Text = command
                end
            end
        end)
    end

    -- Function to update the command list based on the search box input
    local function updateCommandList(query)
        -- Clear existing buttons
        for _, child in ipairs(buttonFrame:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end

        -- Filter and display buttons based on the query
        local yPos = 5
        for _, cmd in ipairs(commands) do
            if cmd.text:lower():find(query:lower()) then
                local button = Instance.new("TextButton")
                button.Size = UDim2.new(1, -10, 0, 40)
                button.Position = UDim2.new(0, 5, 0, yPos)
                button.Text = cmd.text
                button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                button.TextColor3 = Color3.fromRGB(255, 255, 255)
                button.BorderSizePixel = 2
                button.BorderColor3 = Color3.fromRGB(80, 80, 80)
                button.Font = Enum.Font.SourceSans
                button.TextSize = 14
                button.Parent = buttonFrame

                button.MouseButton1Click:Connect(function()
                    sound:Play()
                    detailLabel.Text = cmd.description
                    local hyCmdsGui = game.Players.LocalPlayer:FindFirstChild("PlayerGui"):FindFirstChild("HyCMDs")
                    if hyCmdsGui then
                        local textBox = hyCmdsGui:FindFirstChild("TextBox")
                        if textBox then
                            textBox.Text = cmd.command
                        end
                    end
                end)

                yPos = yPos + 45
            end
        end
    end

    -- Connect the search box to update the command list on text change
    searchBox:GetPropertyChangedSignal("Text"):Connect(function()
        updateCommandList(searchBox.Text)
    end)

    -- Initial population of command buttons
    updateCommandList("")

    -- Close button functionality
    closeButton.MouseButton1Click:Connect(function()
        screenGui:Destroy()
    end)
end,

["paper"] = function()
-- Tạo một hàm để làm nhân vật bị sẹp lép
local function makeFlattened()
    local character = game.Players.LocalPlayer.Character
    if not character then return end

    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Size = Vector3.new(part.Size.X, part.Size.Y, 0.1) -- Làm mỏng theo chiều ngang
        end
    end
end

-- Gọi hàm để làm nhân vật bị sẹp lép
makeFlattened()
end,

["fat"] = function()
-- Tạo một hàm để làm nhân vật mập ra
local function makeFat()
    local character = game.Players.LocalPlayer.Character
    if not character then return end

    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") and part.Name ~= "Head" and part.Name ~= "Hat" then
            -- Điều chỉnh kích thước của các phần không phải là đầu và mũ
            part.Size = part.Size * Vector3.new(2, 2, 2) -- Thay đổi hệ số nếu cần
        end
    end
end

-- Gọi hàm để làm nhân vật mập ra
makeFat()
end,

["loopbring"] = function()
-- Script 1: Dịch chuyển tất cả người chơi đến bạn liên tục và thêm ánh sáng (ESP) vào bạn
local player = game.Players.LocalPlayer
local runService = game:GetService("RunService")

-- Biến lưu trữ kết nối để có thể hủy bỏ sau này
local teleportConnection

-- Tạo phần tử ESP (ánh sáng) cho người chơi
local function addESP(character)
    local highlight = Instance.new("Highlight")
    highlight.Adornee = character
    highlight.FillColor = Color3.fromRGB(255, 0, 0) -- Màu đỏ cho ESP
    highlight.FillTransparency = 0.5 -- Độ trong suốt của ESP
    highlight.OutlineColor = Color3.fromRGB(255, 0, 0) -- Màu viền của ESP
    highlight.OutlineTransparency = 0.5 -- Độ trong suốt của viền
    highlight.Parent = character
end

-- Tạo ESP cho chính người chơi
local character = player.Character or player.CharacterAdded:Wait()
addESP(character)

teleportConnection = runService.RenderStepped:Connect(function()
    local position = character.HumanoidRootPart.Position

    -- Không va chạm giữa các nhân vật
    for _, otherPlayer in pairs(game.Players:GetPlayers()) do
        if otherPlayer ~= player then
            local otherCharacter = otherPlayer.Character
            if otherCharacter then
                for _, part in pairs(otherCharacter:GetChildren()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
                -- Dịch chuyển đến vị trí của bạn
                otherCharacter:SetPrimaryPartCFrame(CFrame.new(position))
            end
        end
    end
end)

-- Biến này giúp Script 2 có thể ngắt kết nối dễ dàng
_G.teleportConnection = teleportConnection
end,

["unloopbring"] = function()
-- Script 2: Hủy bỏ việc dịch chuyển và xóa ESP
if _G.teleportConnection then
    -- Ngắt kết nối để ngừng dịch chuyển
    _G.teleportConnection:Disconnect()
    _G.teleportConnection = nil
end

-- Khôi phục va chạm giữa các nhân vật
local player = game.Players.LocalPlayer
for _, otherPlayer in pairs(game.Players:GetPlayers()) do
    if otherPlayer ~= player then
        local otherCharacter = otherPlayer.Character
        if otherCharacter then
            for _, part in pairs(otherCharacter:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

local highlight = player.Character:FindFirstChildOfClass("Highlight")
if highlight then
    highlight:Destroy()
end
end,

["addtools2"] = function()
local SG, F, CB, AB, NT, NTI, M, MD, SM, SMD, SE, SI, RS, RSBtn, MF, SMF, BBM, BBS =
    Instance.new("ScreenGui"),
    Instance.new("Frame"),
    Instance.new("TextButton"),
    Instance.new("TextButton"),
    Instance.new("TextLabel"),
    Instance.new("TextBox"),
    Instance.new("TextLabel"),
    Instance.new("TextButton"),
    Instance.new("TextLabel"),
    Instance.new("TextButton"),
    Instance.new("TextLabel"),
    Instance.new("TextBox"),
    Instance.new("TextLabel"),
    Instance.new("TextButton"),
    Instance.new("Frame"),
    Instance.new("Frame"),
    Instance.new("TextButton"),
    Instance.new("TextButton")

SG.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

F.Parent = SG
F.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
F.Position = UDim2.new(0.5, -150, 0.5, -100)
F.Size = UDim2.new(0, 300, 0, 250)
F.Active = true
F.Draggable = true

CB.Parent = F
CB.Text = "Close"
CB.Position = UDim2.new(1, -60, 0, 0)
CB.Size = UDim2.new(0, 50, 0, 25)
CB.MouseButton1Click:Connect(function()
    SG:Destroy()
end)

AB.Parent = F
AB.Text = "Apply"
AB.Position = UDim2.new(0.5, -50, 1, -30)
AB.Size = UDim2.new(0, 100, 0, 25)
AB.MouseButton1Click:Connect(function()
    local toolName, mechanism, scriptMechanism, customScript, resetOn = NTI.Text, MD.Text, SMD.Text, SI.Text, RSBtn.Text == "On"
    local tool = Instance.new("Tool")
    tool.Name = toolName
    tool.RequiresHandle = false
    tool.Parent = game.Players.LocalPlayer.Backpack

    local function applyScript(scriptType)
        if scriptType == "Die" then
            game.Players.LocalPlayer.Character.Humanoid.Health = 0
        elseif scriptType == "Lay" then
            tool.Equipped:Connect(function()
                game.Players.LocalPlayer.Character.Humanoid.Sit = true
            end)
        elseif scriptType == "sit" then
            game.Players.LocalPlayer.Character.Humanoid.Sit = true
        elseif scriptType == "Use Script editor" and customScript ~= "" then
            loadstring(customScript)()
        end
    end

    if mechanism == "When tool equipped" then
        tool.Equipped:Connect(function()
            applyScript(scriptMechanism)
        end)
    elseif mechanism == "When tool in inventory" then
        tool.Parent = game.Players.LocalPlayer.Backpack
        applyScript(scriptMechanism)
    end

    if resetOn then
        game.Players.LocalPlayer.Character.Humanoid.Died:Connect(function()
            SG:Destroy()
        end)
    end
end)

NT.Parent = F
NT.Text = "Tool Name"
NT.Position = UDim2.new(0, 10, 0, 10)
NT.Size = UDim2.new(0, 100, 0, 25)

NTI.Parent = F
NTI.Position = UDim2.new(0, 110, 0, 10)
NTI.Size = UDim2.new(0, 150, 0, 25)
NTI.ClearTextOnFocus = true

M.Parent = F
M.Text = "Mechanism"
M.Position = UDim2.new(0, 10, 0, 45)
M.Size = UDim2.new(0, 100, 0, 25)

MD.Parent = F
MD.Text = "Select mechanism"
MD.Position = UDim2.new(0, 110, 0, 45)
MD.Size = UDim2.new(0, 150, 0, 25)
MD.MouseButton1Click:Connect(function()
    F.Visible = false
    MF.Visible = true
end)

SM.Parent = F
SM.Text = "Script Mechanism"
SM.Position = UDim2.new(0, 10, 0, 80)
SM.Size = UDim2.new(0, 100, 0, 25)

SMD.Parent = F
SMD.Text = "Select Script"
SMD.Position = UDim2.new(0, 110, 0, 80)
SMD.Size = UDim2.new(0, 150, 0, 25)
SMD.MouseButton1Click:Connect(function()
    F.Visible = false
    SMF.Visible = true
end)

SE.Parent = F
SE.Text = "Script Editor"
SE.Position = UDim2.new(0, 10, 0, 115)
SE.Size = UDim2.new(0, 100, 0, 25)

SI.Parent = F
SI.Position = UDim2.new(0, 110, 0, 115)
SI.Size = UDim2.new(0, 150, 0, 25)
SI.TextXAlignment = Enum.TextXAlignment.Left
SI.TextYAlignment = Enum.TextYAlignment.Top
SI.MultiLine = true
SI.ClearTextOnFocus = true
SI.TextWrapped = true
SI.TextEditable = false

RS.Parent = F
RS.Text = "Reset will be lost?"
RS.Position = UDim2.new(0, 10, 0, 150)
RS.Size = UDim2.new(0, 130, 0, 25)

RSBtn.Parent = F
RSBtn.Text = "Off"
RSBtn.Position = UDim2.new(0, 150, 0, 150)
RSBtn.Size = UDim2.new(0, 50, 0, 25)
RSBtn.MouseButton1Click:Connect(function()
    if RSBtn.Text == "Off" then
        RSBtn.Text = "On"
    else
        RSBtn.Text = "Off"
    end
end)

SI.FocusLost:Connect(function()
    if SI.Text ~= "" then
        SI.TextEditable = true
    end
end)

MF.Parent = SG
MF.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
MF.Position = UDim2.new(0.5, -150, 0.5, -100)
MF.Size = UDim2.new(0, 300, 0, 200)
MF.Visible = false

local mechanisms = {
    "When tool equipped",
    "When tool in inventory",
    "No mechanism"
}

for i, mech in ipairs(mechanisms) do
    local btn = Instance.new("TextButton", MF)
    btn.Text = mech
    btn.Size = UDim2.new(0, 200, 0, 25)
    btn.Position = UDim2.new(0.5, -100, 0, 20 + (i - 1) * 35)
    btn.MouseButton1Click:Connect(function()
        MD.Text = mech
        MF.Visible = false
        F.Visible = true
    end)
end

BBM.Parent = MF
BBM.Text = "Back"
BBM.Size = UDim2.new(0, 50, 0, 25)
BBM.Position = UDim2.new(1, -60, 0, 0)
BBM.MouseButton1Click:Connect(function()
    MF.Visible = false
    F.Visible = true
end)

SMF.Parent = SG
SMF.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
SMF.Position = UDim2.new(0.5, -150, 0.5, -100)
SMF.Size = UDim2.new(0, 300, 0, 200)
SMF.Visible = false

local scripts = {
    "Die",
    "Lay",
    "sit",
    "Use Script editor"
}

for i, script in ipairs(scripts) do
    local btn = Instance.new("TextButton", SMF)
    btn.Text = script
    btn.Size = UDim2.new(0, 200, 0, 25)
    btn.Position = UDim2.new(0.5, -100, 0, 20 + (i - 1) * 35)
    btn.MouseButton1Click:Connect(function()
        SMD.Text = script
        if script == "Use Script editor" then
            SI.TextEditable = true
        else
            SI.TextEditable = false
        end
        SMF.Visible = false
        F.Visible = true
    end)
end

BBS.Parent = SMF
BBS.Text = "Back"
BBS.Size = UDim2.new(0, 50, 0, 25)
BBS.Position = UDim2.new(1, -60, 0, 0)
BBS.MouseButton1Click:Connect(function()
    SMF.Visible = false
    F.Visible = true
end)
end,

["restoreroot"] = function()
local function restoreRootPart(character)
    if not character then return end
    
    -- Kiểm tra xem nhân vật có RootPart không
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    -- Nếu không có, tạo lại RootPart
    if not rootPart then
        rootPart = Instance.new("Part")
        rootPart.Name = "HumanoidRootPart"
        rootPart.Size = Vector3.new(2, 2, 1)
        rootPart.Anchored = false
        rootPart.CanCollide = false
        rootPart.Transparency = 1
        rootPart.Parent = character
        
        -- Tìm phần thân chính của nhân vật (Torso hoặc UpperTorso)
        local torso = character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
        
        -- Đảm bảo phần thân chính có tồn tại
        if torso then
            rootPart.CFrame = torso.CFrame -- Đặt RootPart ở vị trí của Torso
        else
            rootPart.CFrame = CFrame.new(0, 50, 0) -- Đặt RootPart ở vị trí cao (tránh xuyên qua Void)
        end
        
        -- Gắn RootPart vào thân chính
        local weld = Instance.new("WeldConstraint")
        weld.Part0 = torso
        weld.Part1 = rootPart
        weld.Parent = rootPart
    end
end

-- Sử dụng hàm này khi cần thiết
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        restoreRootPart(character)
    end)
end)

-- Để sử dụng cho nhân vật hiện tại
if game.Players.LocalPlayer.Character then
    restoreRootPart(game.Players.LocalPlayer.Character)
end
end,

["allpartisunanchored"] = function()
-- Create the main GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MyGUI"
screenGui.Parent = game.Players.LocalPlayer.PlayerGui

-- Create the main frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.5, 0, 0.5, 0)
frame.Position = UDim2.new(0.25, 0, 0.25, 0)
frame.BackgroundColor3 = Color3.new(0, 0, 0)
frame.Parent = screenGui

-- Create the title and close button
local titleFrame = Instance.new("Frame")
titleFrame.Size = UDim2.new(1, 0, 0.1, 0)
titleFrame.Position = UDim2.new(0, 0, -0.05, 0)  -- Adjusted position to move it higher
titleFrame.BackgroundColor3 = Color3.new(0, 0, 0)
titleFrame.Parent = frame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 1, 0)
titleLabel.Text = "Warning"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.BackgroundTransparency = 1
titleLabel.TextScaled = true
titleLabel.TextStrokeTransparency = 0.8
titleLabel.Parent = titleFrame

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0.1, 0, 1, 0)
closeButton.Position = UDim2.new(1, -50, 0, 0)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.new(1, 0, 0)
closeButton.BackgroundColor3 = Color3.new(0, 0, 0)
closeButton.Parent = titleFrame

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Create the scrollable content area
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, 0, 0.65, 0)
scrollFrame.Position = UDim2.new(0, 0, 0.05, 0)
scrollFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
scrollFrame.BorderSizePixel = 0
scrollFrame.Parent = frame

local content = Instance.new("TextLabel")
content.Size = UDim2.new(1, 0, 1, 0)
content.Position = UDim2.new(0, 0, 0, 0)
content.Text = "⚠️ **Warning:** This action will unanchor all parts in the world. Proceed with caution.\n\n**Details:**\n- This action will affect all parts in the workspace.\n- Unanchoring parts may cause instability or unexpected behavior in your game.\n\nAre you sure you want to proceed?"
content.TextColor3 = Color3.new(1, 1, 1)
content.BackgroundTransparency = 1
content.TextSize = 18
content.TextWrapped = true
content.TextStrokeTransparency = 0.5
content.Parent = scrollFrame

-- Create the Yes and No buttons
local buttonFrame = Instance.new("Frame")
buttonFrame.Size = UDim2.new(1, 0, 0.2, 0)
buttonFrame.Position = UDim2.new(0, 0, 0.75, 0)
buttonFrame.BackgroundColor3 = Color3.new(0, 0, 0)
buttonFrame.Parent = frame

local yesButton = Instance.new("TextButton")
yesButton.Size = UDim2.new(0.4, 0, 0.8, 0)
yesButton.Position = UDim2.new(0.1, 0, 0.1, 0)
yesButton.Text = "Yes"
yesButton.TextColor3 = Color3.new(1, 1, 1)
yesButton.BackgroundColor3 = Color3.new(0, 0.5, 0)
yesButton.TextSize = 18
yesButton.TextStrokeTransparency = 0.5
yesButton.Parent = buttonFrame

local noButton = Instance.new("TextButton")
noButton.Size = UDim2.new(0.4, 0, 0.8, 0)
noButton.Position = UDim2.new(0.5, 0, 0.1, 0)
noButton.Text = "No"
noButton.TextColor3 = Color3.new(1, 1, 1)
noButton.BackgroundColor3 = Color3.new(0.5, 0, 0)
noButton.TextSize = 18
noButton.TextStrokeTransparency = 0.5
noButton.Parent = buttonFrame

-- Create the language selection button
local languageFrame = Instance.new("Frame")
languageFrame.Size = UDim2.new(1, 0, 0.1, 0)
languageFrame.Position = UDim2.new(0, 0, 0.9, 0)
languageFrame.BackgroundColor3 = Color3.new(0, 0, 0)
languageFrame.Parent = frame

local languageLabel = Instance.new("TextLabel")
languageLabel.Size = UDim2.new(0.8, 0, 1, 0)
languageLabel.Text = "Language"
languageLabel.TextColor3 = Color3.new(1, 1, 1)
languageLabel.BackgroundTransparency = 1
languageLabel.TextSize = 18
languageLabel.Parent = languageFrame

local languageButton = Instance.new("TextButton")
languageButton.Size = UDim2.new(0.2, 0, 1, 0)
languageButton.Position = UDim2.new(0.8, 0, 0, 0)
languageButton.Text = "Change"
languageButton.TextColor3 = Color3.new(1, 1, 1)
languageButton.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
languageButton.TextSize = 18
languageButton.Parent = languageFrame

-- Language options
local languages = {
    ["VI"] = "⚠️ **Cảnh báo:** Hành động này sẽ làm tất cả các phần trong thế giới không còn được gắn chặt. Tiến hành với sự thận trọng.\n\n**Chi tiết:**\n- Hành động này sẽ ảnh hưởng đến tất cả các phần trong workspace.\n- Việc bỏ gắn chặt các phần có thể gây ra sự không ổn định hoặc hành vi không mong muốn trong trò chơi của bạn.\n\nBạn có chắc chắn muốn tiếp tục?",
    ["RU"] = "⚠️ **Внимание:** Это действие сделает все детали в мире не закрепленными. Пожалуйста, действуйте осторожно.\n\n**Подробности:**\n- Это действие затронет все детали в рабочем пространстве.\n- Снятие фиксации деталей может привести к нестабильности или неожиданному поведению в вашей игре.\n\nВы уверены, что хотите продолжить?",
    ["EN"] = "⚠️ **Warning:** This action will unanchor all parts in the world. Proceed with caution.\n\n**Details:**\n- This action will affect all parts in the workspace.\n- Unanchoring parts may cause instability or unexpected behavior in your game.\n\nAre you sure you want to proceed?",
    ["SP"] = "⚠️ **Advertencia:** Esta acción desanclará todas las partes en el mundo. Proceda con precaución.\n\n**Detalles:**\n- Esta acción afectará a todas las partes en el espacio de trabajo.\n- Desanclar partes puede causar inestabilidad o comportamientos inesperados en tu juego.\n\n¿Estás seguro de que deseas continuar?"
}

local currentLanguage = "EN"

local function updateLanguage()
    content.Text = languages[currentLanguage]
end

languageButton.MouseButton1Click:Connect(function()
    local languageOptions = {"VI", "RU", "EN", "SP"}
    local currentIndex = table.find(languageOptions, currentLanguage)
    currentIndex = (currentIndex % #languageOptions) + 1
    currentLanguage = languageOptions[currentIndex]
    updateLanguage()
end)

-- Function to unanchor all parts in the game world
local function unanchorAllParts()
    for _, object in pairs(workspace:GetDescendants()) do
        if object:IsA("BasePart") then
            object.Anchored = false
        end
    end
end

-- Connect button actions
yesButton.MouseButton1Click:Connect(function()
    unanchorAllParts()
    screenGui:Destroy()
end)

noButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Initialize the language
updateLanguage()
end,

["apiud"] = function()
-- Create the main GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MyGUI"
screenGui.Parent = game.Players.LocalPlayer.PlayerGui

-- Create the main frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0.5, 0, 0.5, 0)
frame.Position = UDim2.new(0.25, 0, 0.25, 0)
frame.BackgroundColor3 = Color3.new(0, 0, 0)
frame.Parent = screenGui

-- Create the title and close button
local titleFrame = Instance.new("Frame")
titleFrame.Size = UDim2.new(1, 0, 0.1, 0)
titleFrame.Position = UDim2.new(0, 0, -0.05, 0)  -- Adjusted position to move it higher
titleFrame.BackgroundColor3 = Color3.new(0, 0, 0)
titleFrame.Parent = frame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, 0, 1, 0)
titleLabel.Text = "Warning"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.BackgroundTransparency = 1
titleLabel.TextScaled = true
titleLabel.TextStrokeTransparency = 0.8
titleLabel.Parent = titleFrame

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0.1, 0, 1, 0)
closeButton.Position = UDim2.new(1, -50, 0, 0)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.new(1, 0, 0)
closeButton.BackgroundColor3 = Color3.new(0, 0, 0)
closeButton.Parent = titleFrame

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Create the scrollable content area
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, 0, 0.65, 0)
scrollFrame.Position = UDim2.new(0, 0, 0.05, 0)
scrollFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
scrollFrame.BorderSizePixel = 0
scrollFrame.Parent = frame

local content = Instance.new("TextLabel")
content.Size = UDim2.new(1, 0, 1, 0)
content.Position = UDim2.new(0, 0, 0, 0)
content.Text = "⚠️ **Warning:** This action will unanchor all parts in the world. Proceed with caution.\n\n**Details:**\n- This action will affect all parts in the workspace.\n- Unanchoring parts may cause instability or unexpected behavior in your game.\n\nAre you sure you want to proceed?"
content.TextColor3 = Color3.new(1, 1, 1)
content.BackgroundTransparency = 1
content.TextSize = 18
content.TextWrapped = true
content.TextStrokeTransparency = 0.5
content.Parent = scrollFrame

-- Create the Yes and No buttons
local buttonFrame = Instance.new("Frame")
buttonFrame.Size = UDim2.new(1, 0, 0.2, 0)
buttonFrame.Position = UDim2.new(0, 0, 0.75, 0)
buttonFrame.BackgroundColor3 = Color3.new(0, 0, 0)
buttonFrame.Parent = frame

local yesButton = Instance.new("TextButton")
yesButton.Size = UDim2.new(0.4, 0, 0.8, 0)
yesButton.Position = UDim2.new(0.1, 0, 0.1, 0)
yesButton.Text = "Yes"
yesButton.TextColor3 = Color3.new(1, 1, 1)
yesButton.BackgroundColor3 = Color3.new(0, 0.5, 0)
yesButton.TextSize = 18
yesButton.TextStrokeTransparency = 0.5
yesButton.Parent = buttonFrame

local noButton = Instance.new("TextButton")
noButton.Size = UDim2.new(0.4, 0, 0.8, 0)
noButton.Position = UDim2.new(0.5, 0, 0.1, 0)
noButton.Text = "No"
noButton.TextColor3 = Color3.new(1, 1, 1)
noButton.BackgroundColor3 = Color3.new(0.5, 0, 0)
noButton.TextSize = 18
noButton.TextStrokeTransparency = 0.5
noButton.Parent = buttonFrame

-- Create the language selection button
local languageFrame = Instance.new("Frame")
languageFrame.Size = UDim2.new(1, 0, 0.1, 0)
languageFrame.Position = UDim2.new(0, 0, 0.9, 0)
languageFrame.BackgroundColor3 = Color3.new(0, 0, 0)
languageFrame.Parent = frame

local languageLabel = Instance.new("TextLabel")
languageLabel.Size = UDim2.new(0.8, 0, 1, 0)
languageLabel.Text = "Language"
languageLabel.TextColor3 = Color3.new(1, 1, 1)
languageLabel.BackgroundTransparency = 1
languageLabel.TextSize = 18
languageLabel.Parent = languageFrame

local languageButton = Instance.new("TextButton")
languageButton.Size = UDim2.new(0.2, 0, 1, 0)
languageButton.Position = UDim2.new(0.8, 0, 0, 0)
languageButton.Text = "Change"
languageButton.TextColor3 = Color3.new(1, 1, 1)
languageButton.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
languageButton.TextSize = 18
languageButton.Parent = languageFrame

-- Language options
local languages = {
    ["VI"] = "⚠️ **Cảnh báo:** Hành động này sẽ làm tất cả các phần trong thế giới không còn được gắn chặt. Tiến hành với sự thận trọng.\n\n**Chi tiết:**\n- Hành động này sẽ ảnh hưởng đến tất cả các phần trong workspace.\n- Việc bỏ gắn chặt các phần có thể gây ra sự không ổn định hoặc hành vi không mong muốn trong trò chơi của bạn.\n\nBạn có chắc chắn muốn tiếp tục?",
    ["RU"] = "⚠️ **Внимание:** Это действие сделает все детали в мире не закрепленными. Пожалуйста, действуйте осторожно.\n\n**Подробности:**\n- Это действие затронет все детали в рабочем пространстве.\n- Снятие фиксации деталей может привести к нестабильности или неожиданному поведению в вашей игре.\n\nВы уверены, что хотите продолжить?",
    ["EN"] = "⚠️ **Warning:** This action will unanchor all parts in the world. Proceed with caution.\n\n**Details:**\n- This action will affect all parts in the workspace.\n- Unanchoring parts may cause instability or unexpected behavior in your game.\n\nAre you sure you want to proceed?",
    ["SP"] = "⚠️ **Advertencia:** Esta acción desanclará todas las partes en el mundo. Proceda con precaución.\n\n**Detalles:**\n- Esta acción afectará a todas las partes en el espacio de trabajo.\n- Desanclar partes puede causar inestabilidad o comportamientos inesperados en tu juego.\n\n¿Estás seguro de que deseas continuar?"
}

local currentLanguage = "EN"

local function updateLanguage()
    content.Text = languages[currentLanguage]
end

languageButton.MouseButton1Click:Connect(function()
    local languageOptions = {"VI", "RU", "EN", "SP"}
    local currentIndex = table.find(languageOptions, currentLanguage)
    currentIndex = (currentIndex % #languageOptions) + 1
    currentLanguage = languageOptions[currentIndex]
    updateLanguage()
end)

-- Function to unanchor all parts in the game world
local function unanchorAllParts()
    for _, object in pairs(workspace:GetDescendants()) do
        if object:IsA("BasePart") then
            object.Anchored = false
        end
    end
end

-- Connect button actions
yesButton.MouseButton1Click:Connect(function()
    unanchorAllParts()
    screenGui:Destroy()
end)

noButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Initialize the language
updateLanguage()
end,

["button#freeze"] = function()
local ScreenGui = Instance.new("ScreenGui")
local DraggableButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

DraggableButton.Parent = ScreenGui
DraggableButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Màu đen
DraggableButton.Size = UDim2.new(0, 100, 0, 50)
DraggableButton.Position = UDim2.new(0.5, -50, 0.5, -25)
DraggableButton.Text = "Freeze"
DraggableButton.TextColor3 = Color3.new(1, 1, 1) -- Màu trắng cho chữ

local character = game.Players.LocalPlayer.Character
local isFrozen = false
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    DraggableButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DraggableButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = DraggableButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DraggableButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

-- Hàm để freeze và unfreeze nhân vật
local function toggleFreeze()
    if isFrozen then
        character.HumanoidRootPart.Anchored = false -- Unfreeze
        DraggableButton.Text = "Freeze"
    else
        character.HumanoidRootPart.Anchored = true -- Freeze
        DraggableButton.Text = "Unfreeze"
    end
    isFrozen = not isFrozen
end

-- Khi bấm nút thì freeze/unfreeze
DraggableButton.MouseButton1Click:Connect(toggleFreeze)
end,

["button#lay"] = function()
local ScreenGui = Instance.new("ScreenGui")
local DraggableButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

DraggableButton.Parent = ScreenGui
DraggableButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Màu đen
DraggableButton.Size = UDim2.new(0, 100, 0, 50)
DraggableButton.Position = UDim2.new(0.5, -50, 0.5, -25)
DraggableButton.Text = "Lay"
DraggableButton.TextColor3 = Color3.new(1, 1, 1) -- Màu trắng cho chữ

local character = game.Players.LocalPlayer.Character
local humanoid = character:FindFirstChild("Humanoid")
local isLaying = false
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    DraggableButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DraggableButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = DraggableButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DraggableButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

-- Hàm để giữ trạng thái lay
local function toggleLay()
    if isLaying then
        humanoid.PlatformStand = false -- Cho phép nhân vật đứng dậy
        humanoid:ChangeState(Enum.HumanoidStateType.GettingUp) -- Unlay
        DraggableButton.Text = "Lay"
    else
        humanoid.PlatformStand = true -- Vô hiệu hóa chuyển động đứng dậy
        humanoid:ChangeState(Enum.HumanoidStateType.Ragdoll) -- Lay
        DraggableButton.Text = "Unlay"
    end
    isLaying = not isLaying
end

-- Khi bấm nút thì lay/unlay
DraggableButton.MouseButton1Click:Connect(toggleLay)
end,

["button#sit"] = function()
local ScreenGui = Instance.new("ScreenGui")
local DraggableButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

DraggableButton.Parent = ScreenGui
DraggableButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Màu đen
DraggableButton.Size = UDim2.new(0, 100, 0, 50)
DraggableButton.Position = UDim2.new(0.5, -50, 0.5, -25)
DraggableButton.Text = "Sit"
DraggableButton.TextColor3 = Color3.new(1, 1, 1) -- Màu trắng cho chữ

local character = game.Players.LocalPlayer.Character
local humanoid = character:FindFirstChild("Humanoid")
local isSitting = false
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    DraggableButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DraggableButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = DraggableButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DraggableButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

-- Hàm để sit và unsit nhân vật
local function toggleSit()
    if isSitting then
        humanoid.Sit = false -- Unsit
        DraggableButton.Text = "Sit"
    else
        humanoid.Sit = true -- Sit
        DraggableButton.Text = "Unsit"
    end
    isSitting = not isSitting
end

-- Khi bấm nút thì sit/unsit
DraggableButton.MouseButton1Click:Connect(toggleSit)
end,

["button#time"] = function()
local ScreenGui = Instance.new("ScreenGui")
local DraggableButton = Instance.new("TextButton")

ScreenGui.Parent = game.CoreGui

DraggableButton.Parent = ScreenGui
DraggableButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Màu đen
DraggableButton.Size = UDim2.new(0, 100, 0, 50)
DraggableButton.Position = UDim2.new(0.5, -50, 0.5, -25)
DraggableButton.Text = "Day"
DraggableButton.TextColor3 = Color3.new(1, 1, 1) -- Màu trắng cho chữ

local lighting = game:GetService("Lighting")
local isDay = true
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    DraggableButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DraggableButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = DraggableButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DraggableButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

-- Hàm để chuyển đổi giữa Day và Night
local function toggleDayNight()
    if isDay then
        lighting.TimeOfDay = "00:00:00" -- Đặt về đêm (midnight)
        DraggableButton.Text = "Night"
    else
        lighting.TimeOfDay = "12:00:00" -- Đặt về ngày (noon)
        DraggableButton.Text = "Day"
    end
    isDay = not isDay
end

-- Khi bấm nút thì chuyển đổi giữa Day/Night
DraggableButton.MouseButton1Click:Connect(toggleDayNight)
end,

["button#freecam"] = function()
local ScreenGui = Instance.new("ScreenGui")
local DraggableButton = Instance.new("TextButton")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local Camera = game.Workspace.CurrentCamera
local originalCamera = Camera.CFrame
local freecamEnabled = false

ScreenGui.Parent = game.CoreGui

DraggableButton.Parent = ScreenGui
DraggableButton.BackgroundColor3 = Color3.new(0, 0, 0) -- Màu đen
DraggableButton.Size = UDim2.new(0, 100, 0, 50)
DraggableButton.Position = UDim2.new(0.5, -50, 0.5, -25)
DraggableButton.Text = "Freecam"
DraggableButton.TextColor3 = Color3.new(1, 1, 1) -- Màu trắng cho chữ

local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
    local delta = input.Position - dragStart
    DraggableButton.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

DraggableButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = DraggableButton.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

DraggableButton.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        update(input)
    end
end)

-- Hàm để chuyển đổi giữa Freecam và chế độ camera gốc
local function toggleFreecam()
    if freecamEnabled then
        -- Về chế độ camera gốc
        Camera.CameraType = Enum.CameraType.Custom
        Camera.CFrame = originalCamera
        DraggableButton.Text = "Freecam"
    else
        -- Vào chế độ Freecam
        Camera.CameraType = Enum.CameraType.Scriptable
        DraggableButton.Text = "UnFreecam"
    end
    freecamEnabled = not freecamEnabled
end

-- Khi bấm nút thì chuyển đổi giữa Freecam và chế độ camera gốc
DraggableButton.MouseButton1Click:Connect(toggleFreecam)
end,

["oldshoolanimation"] = function()
-- Get the player's character
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- Get the Animate script
local animateScript = character:WaitForChild("Animate")

-- Set the Oldschool Animation Pack IDs
animateScript.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=5319828216"
animateScript.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=5319828216"
animateScript.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=5319844329"
animateScript.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=5319844329"
animateScript.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=5319841935"
animateScript.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=5319816685"
animateScript.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=5319839762"
end,

["vampireanimation"] = function()
local plr = game.Players.LocalPlayer
local character = plr.Character or plr.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")

-- Cập nhật các AnimationId
animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=1083445855"
animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=1083450166"
animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=1083473930"
animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=1083462077"
animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=1083455352"
animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=1083439238"
animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=1083443587"

-- Đảm bảo đối tượng Animate không bị vô hiệu hóa
animate.Disabled = false
end,

["heroanimation"] = function()
local plr = game.Players.LocalPlayer
local character = plr.Character or plr.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")
animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=616111295"
animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=616113536"
animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=616122287"
animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=616117076"
animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=616115533"
animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=616104706"
animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=616108001"
animate.Disabled = false
end,

["zombieclassicanimation"] = function()
local plr = game.Players.LocalPlayer
local character = plr.Character or plr.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")
animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=616158929"
animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=616160636"
animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=616168032"
animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=616163682"
animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=616161997"
animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=616156119"
animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=616157476"
animate.Disabled = false
end,

["mageanimation"] = function()
local plr = game.Players.LocalPlayer
local character = plr.Character or plr.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")
animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=707742142"
animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=707855907"
animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=707897309"
animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=707861613"
animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=707853694"
animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=707826056"
animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=707829716"
animate.Disabled = false
end,

["ghostanimation"] = function()
local plr = game.Players.LocalPlayer
local character = plr.Character or plr.CharacterAdded:Wait()
local animate = character:WaitForChild("Animate")
animate.idle.Animation1.AnimationId = "http://www.roblox.com/asset/?id=616006778"
animate.idle.Animation2.AnimationId = "http://www.roblox.com/asset/?id=616008087"
animate.walk.WalkAnim.AnimationId = "http://www.roblox.com/asset/?id=616010382"
animate.run.RunAnim.AnimationId = "http://www.roblox.com/asset/?id=616013216"
animate.jump.JumpAnim.AnimationId = "http://www.roblox.com/asset/?id=616008936"
animate.climb.ClimbAnim.AnimationId = "http://www.roblox.com/asset/?id=616003713"
animate.fall.FallAnim.AnimationId = "http://www.roblox.com/asset/?id=616005863"
animate.Disabled = false
end,

["checkupdate"] = function()
local player = game.Players.LocalPlayer
local hyCmds = player:WaitForChild("PlayerGui"):FindFirstChild("HyCMDs")

if hyCmds then
    hyCmds:Destroy()
end

loadstring(game:HttpGet("https://raw.githubusercontent.com/Biem6ondo/Admin/main/HyCMDs"))()
end,

["executor"] = function()
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TB = Instance.new("TextBox")
local IYCommandButton = Instance.new("TextButton")
local ExecuteButton = Instance.new("TextButton")
local CopyScriptButton = Instance.new("TextButton")
local DeleteScriptButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local ToggleButton = Instance.new("TextButton")
local SizeGuisButton = Instance.new("TextButton")
local UICornerFrame = Instance.new("UICorner")
local UICornerButton = Instance.new("UICorner")
local UICornerToggle = Instance.new("UICorner")
local UICornerSizeButton = Instance.new("UICorner")

ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

Frame.Size = UDim2.new(0, 400, 0, 330)
Frame.Position = UDim2.new(0.5, -200, 0.5, -150)
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.Visible = false
Frame.Parent = ScreenGui

UICornerFrame.CornerRadius = UDim.new(0, 10)
UICornerFrame.Parent = Frame

TB.Size = UDim2.new(0, 380, 0, 150)
TB.Position = UDim2.new(0, 10, 0, 40)
TB.Text = ""
TB.TextColor3 = Color3.fromRGB(255, 255, 255)
TB.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TB.ClearTextOnFocus = false
TB.TextWrapped = true
TB.TextXAlignment = Enum.TextXAlignment.Left
TB.Parent = Frame

IYCommandButton.Size = UDim2.new(0, 180, 0, 30)
IYCommandButton.Position = UDim2.new(0, 10, 0, 200)
IYCommandButton.Text = "IY Command"
IYCommandButton.TextColor3 = Color3.fromRGB(255, 255, 255)
IYCommandButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
IYCommandButton.Parent = Frame

ExecuteButton.Size = UDim2.new(0, 180, 0, 30)
ExecuteButton.Position = UDim2.new(0, 200, 0, 200)
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExecuteButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ExecuteButton.Parent = Frame

CopyScriptButton.Size = UDim2.new(0, 180, 0, 30)
CopyScriptButton.Position = UDim2.new(0, 10, 0, 240)
CopyScriptButton.Text = "Copy script"
CopyScriptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CopyScriptButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
CopyScriptButton.Parent = Frame

DeleteScriptButton.Size = UDim2.new(0, 180, 0, 30)
DeleteScriptButton.Position = UDim2.new(0, 200, 0, 240)
DeleteScriptButton.Text = "Delete Script"
DeleteScriptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
DeleteScriptButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
DeleteScriptButton.Parent = Frame

CloseButton.Size = UDim2.new(0, 380, 0, 30)
CloseButton.Position = UDim2.new(0, 10, 0, 280)
CloseButton.Text = "[X] CLOSE"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
CloseButton.Parent = Frame

ToggleButton.Size = UDim2.new(0, 150, 0, 30)
ToggleButton.Position = UDim2.new(0.5, -75, 0.1, 0)
ToggleButton.Text = "Toggle Executor"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.Parent = ScreenGui

UICornerToggle.CornerRadius = UDim.new(0, 10)
UICornerToggle.Parent = ToggleButton

UICornerSizeButton.CornerRadius = UDim.new(0, 10)
UICornerSizeButton.Parent = SizeGuisButton

for _, button in pairs({IYCommandButton, ExecuteButton, CopyScriptButton, DeleteScriptButton, CloseButton, ToggleButton}) do
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 10)
    UICorner.Parent = button
end

local function changeButtonColor(button, color)
    button.BackgroundColor3 = color
    wait(0.5)
    button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
end

IYCommandButton.MouseButton1Click:Connect(function()
    changeButtonColor(IYCommandButton, Color3.fromRGB(255, 165, 0))
    local success, err = pcall(function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
    end)
    if not success then
        warn("Error: " .. err)
    end
end)

ExecuteButton.MouseButton1Click:Connect(function()
    changeButtonColor(ExecuteButton, Color3.fromRGB(0, 255, 0))
    local scriptToRun = TB.Text
    local success, err = pcall(function()
        loadstring(scriptToRun)()
    end)
    if not success then
        warn("Error: " .. err)
    end
end)

CopyScriptButton.MouseButton1Click:Connect(function()
    changeButtonColor(CopyScriptButton, Color3.fromRGB(0, 0, 255))
    setclipboard(TB.Text)
end)

DeleteScriptButton.MouseButton1Click:Connect(function()
    changeButtonColor(DeleteScriptButton, Color3.fromRGB(255, 0, 0))
    TB.Text = ""
end)

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

ToggleButton.MouseButton1Click:Connect(function()
    Frame.Visible = not Frame.Visible
end)
end,

["emote"] = function()
local ContextActionService = game:GetService("ContextActionService")
local HttpService = game:GetService("HttpService")
local GuiService = game:GetService("GuiService")
local CoreGui = game:GetService("CoreGui")
local MarketplaceService = game:GetService("MarketplaceService")
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")

local Emotes = {}
local LoadedEmotes = {}
local function AddEmote(name: string, id: IntValue, price: IntValue?)
	LoadedEmotes[id] = false
	task.spawn(function()
		if not (name and id) then
			return
		end
		local success, date = pcall(function()
			local info = MarketplaceService:GetProductInfo(id)
			local updated = info.Updated
			return DateTime.fromIsoDate(updated):ToUniversalTime()
		end)
		if not success then
			task.wait(10)
			AddEmote(name, id, price)
			return
		end
		local unix = os.time({
			year = date.Year,
			month = date.Month,
			day = date.Day,
			hour = date.Hour,
			min = date.Minute,
			sec = date.Second
		})
		LoadedEmotes[id] = true
		table.insert(Emotes, {
			["name"] = name,
			["id"] = id,
			["icon"] = "rbxthumb://type=Asset&id=".. id .."&w=150&h=150",
			["price"] = price or 0,
			["lastupdated"] = unix,
			["sort"] = {}
		})
	end)
end
local CurrentSort = "recentfirst"

local FavoriteOff = "rbxassetid://10651060677"
local FavoriteOn = "rbxassetid://10651061109"
local FavoritedEmotes = {}

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Emotes"
ScreenGui.DisplayOrder = 2
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Enabled = true

local BackFrame = Instance.new("Frame")
BackFrame.Size = UDim2.new(0.9, 0, 0.5, 0)
BackFrame.AnchorPoint = Vector2.new(0.5, 0.5)
BackFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
BackFrame.SizeConstraint = Enum.SizeConstraint.RelativeYY
BackFrame.BackgroundTransparency = 1
BackFrame.BorderSizePixel = 0
BackFrame.Parent = ScreenGui

local EmoteName = Instance.new("TextLabel")
EmoteName.Name = "EmoteName"
EmoteName.TextScaled = true
EmoteName.AnchorPoint = Vector2.new(0.5, 0.5)
EmoteName.Position = UDim2.new(-0.1, 0, 0.5, 0)
EmoteName.Size = UDim2.new(0.2, 0, 0.2, 0)
EmoteName.SizeConstraint = Enum.SizeConstraint.RelativeYY
EmoteName.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
EmoteName.TextColor3 = Color3.new(1, 1, 1)
EmoteName.BorderSizePixel = 0
EmoteName.Parent = BackFrame

local Corner = Instance.new("UICorner")
Corner.Parent = EmoteName

local Loading = Instance.new("TextLabel", BackFrame)
Loading.AnchorPoint = Vector2.new(0.5, 0.5)
Loading.Text = "Loading...\nIf it takes more than 10 seconds, roblox is having issues\n(En) Emote will comming...."
Loading.TextColor3 = Color3.new(1, 1, 1)
Loading.BackgroundColor3 = Color3.new(0, 0, 0)
Loading.TextScaled = true
Loading.BackgroundTransparency = 0.5
Loading.Size = UDim2.fromScale(0.4, 0.2)
Loading.Position = UDim2.fromScale(0.5, 0.2)
Corner:Clone().Parent = Loading

local Frame = Instance.new("ScrollingFrame")
Frame.Size = UDim2.new(1, 0, 1, 0)
Frame.CanvasSize = UDim2.new(0, 0, 0, 0)
Frame.AutomaticCanvasSize = Enum.AutomaticSize.Y
Frame.ScrollingDirection = Enum.ScrollingDirection.Y
Frame.AnchorPoint = Vector2.new(0.5, 0.5)
Frame.Position = UDim2.new(0.5, 0, 0.5, 0)
Frame.BackgroundTransparency = 1
Frame.ScrollBarThickness = 5
Frame.BorderSizePixel = 0
Frame.MouseLeave:Connect(function()
	EmoteName.Text = "Select an Emote"
end)
Frame.Parent = BackFrame

local Grid = Instance.new("UIGridLayout")
Grid.CellSize = UDim2.new(0.105, 0, 0, 0)
Grid.CellPadding = UDim2.new(0.006, 0, 0.006, 0)
Grid.SortOrder = Enum.SortOrder.LayoutOrder
Grid.Parent = Frame

local SortFrame = Instance.new("Frame")
SortFrame.Visible = false
SortFrame.BorderSizePixel = 0
SortFrame.Position = UDim2.new(1, 5, -0.125, 0)
SortFrame.Size = UDim2.new(0.2, 0, 0, 0)
SortFrame.AutomaticSize = Enum.AutomaticSize.Y
SortFrame.BackgroundTransparency = 1
Corner:Clone().Parent = SortFrame
SortFrame.Parent = BackFrame

local SortList = Instance.new("UIListLayout")
SortList.Padding = UDim.new(0.02, 0)
SortList.HorizontalAlignment = Enum.HorizontalAlignment.Center
SortList.VerticalAlignment = Enum.VerticalAlignment.Top
SortList.SortOrder = Enum.SortOrder.LayoutOrder
SortList.Parent = SortFrame

local function SortEmotes()
	for i,Emote in pairs(Emotes) do
		local EmoteButton = Frame:FindFirstChild(Emote.id)
		if not EmoteButton then
			continue
		end
		local IsFavorited = table.find(FavoritedEmotes, Emote.id)
		EmoteButton.LayoutOrder = Emote.sort[CurrentSort] + ((IsFavorited and 0) or #Emotes)
		EmoteButton.number.Text = Emote.sort[CurrentSort]
	end
end

local function createsort(order, text, sort)
	local CreatedSort = Instance.new("TextButton")
	CreatedSort.SizeConstraint = Enum.SizeConstraint.RelativeXX
	CreatedSort.Size = UDim2.new(1, 0, 0.2, 0)
	CreatedSort.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	CreatedSort.LayoutOrder = order
	CreatedSort.TextColor3 = Color3.new(1, 1, 1)
	CreatedSort.Text = text
	CreatedSort.TextScaled = true
	CreatedSort.BorderSizePixel = 0
	Corner:Clone().Parent = CreatedSort
	CreatedSort.Parent = SortFrame
	CreatedSort.MouseButton1Click:Connect(function()
		SortFrame.Visible = false
		CurrentSort = sort
		SortEmotes()
	end)
	return CreatedSort
end

createsort(1, "Recently Updated First", "recentfirst")
createsort(2, "Recently Updated Last", "recentlast")
createsort(3, "Alphabetically First", "alphabeticfirst")
createsort(4, "Alphabetically Last", "alphabeticlast")
createsort(5, "Highest Price", "highestprice")
createsort(6, "Lowest Price", "lowestprice")

local SortButton = Instance.new("TextButton")
SortButton.BorderSizePixel = 0
SortButton.AnchorPoint = Vector2.new(0.5, 0.5)
SortButton.Position = UDim2.new(0.925, -5, -0.075, 0)
SortButton.Size = UDim2.new(0.15, 0, 0.1, 0)
SortButton.TextScaled = true
SortButton.TextColor3 = Color3.new(1, 1, 1)
SortButton.BackgroundColor3 = Color3.new(0, 0, 0)
SortButton.BackgroundTransparency = 0.3
SortButton.Text = "Sort"
SortButton.MouseButton1Click:Connect(function()
	SortFrame.Visible = not SortFrame.Visible
end)
Corner:Clone().Parent = SortButton
SortButton.Parent = BackFrame

local CloseButton = Instance.new("TextButton")
CloseButton.BorderSizePixel = 0
CloseButton.AnchorPoint = Vector2.new(0.5, 0.5)
CloseButton.Position = UDim2.new(0.075, 0, -0.075, 0)
CloseButton.Size = UDim2.new(0.15, 0, 0.1, 0)
CloseButton.TextScaled = true
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.BackgroundColor3 = Color3.new(0, 0, 0)
CloseButton.BackgroundTransparency = 0.3
CloseButton.Text = "❌"
CloseButton.MouseButton1Click:Connect(function()
	ScreenGui.Frame.Visible = false
end)
Corner:Clone().Parent = CloseButton
CloseButton.Parent = BackFrame

local SearchBar = Instance.new("TextBox")
SearchBar.BorderSizePixel = 0
SearchBar.AnchorPoint = Vector2.new(0.5, 0.5)
SearchBar.Position = UDim2.new(0.5, 0, -0.075, 0)
SearchBar.Size = UDim2.new(0.55, 0, 0.1, 0)
SearchBar.TextScaled = true
SearchBar.PlaceholderText = "Search"
SearchBar.TextColor3 = Color3.new(1, 1, 1)
SearchBar.BackgroundColor3 = Color3.new(0, 0, 0)
SearchBar.BackgroundTransparency = 0.3
SearchBar:GetPropertyChangedSignal("Text"):Connect(function()
	local text = SearchBar.Text:lower()
	local buttons = Frame:GetChildren()
	if text ~= text:sub(1,50) then
		SearchBar.Text = SearchBar.Text:sub(1,50)
		text = SearchBar.Text:lower()
	end
	if text ~= ""  then
		for i,button in pairs(buttons) do
			if button:IsA("GuiButton") then
				local name = button:GetAttribute("name"):lower()
				if name:match(text) then
					button.Visible = true
				else
					button.Visible = false
				end
			end
		end
	else
		for i,button in pairs(buttons) do
			if button:IsA("GuiButton") then
				button.Visible = true
			end
		end
	end
end)
Corner:Clone().Parent = SearchBar
SearchBar.Parent = BackFrame

local OpenEmotesButton = Instance.new("ImageButton")
OpenEmotesButton.Name = "OpenEmotesButton"
OpenEmotesButton.Parent = ScreenGui
OpenEmotesButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
OpenEmotesButton.BackgroundTransparency = 0.5
OpenEmotesButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
OpenEmotesButton.BorderSizePixel = 0
OpenEmotesButton.Position = UDim2.new(0, 0, 0.5, -30)
OpenEmotesButton.Size = UDim2.new(0, 60, 0, 60)
OpenEmotesButton.Image = "rbxthumb://type=Asset&id=2736760466&w=420&h=420"

OpenEmotesButton.MouseButton1Click:Connect(function()
	ScreenGui.Frame.Visible = not ScreenGui.Frame.Visible
end)

local ButtonCorner = Instance.new("UICorner")
ButtonCorner.CornerRadius = UDim.new(1, 0)
ButtonCorner.Parent = OpenEmotesButton

local function openemotes(name, state, input)
	if state == Enum.UserInputState.Begin then
		ScreenGui.Frame.Visible = not ScreenGui.Frame.Visible
	end
end

ContextActionService:BindCoreActionAtPriority(
	"Emote Menu",
	openemotes,
	true,
	2001,
	Enum.KeyCode.Comma
)

local inputconnect
ScreenGui:GetPropertyChangedSignal("Enabled"):Connect(function()
	if ScreenGui.Frame.Visible == true then
		EmoteName.Text = "Select an Emote"
		SearchBar.Text = ""
		SortFrame.Visible = false
		GuiService:SetEmotesMenuOpen(false)
		inputconnect = UserInputService.InputBegan:Connect(function(input, processed)
			if not processed then
				if input.UserInputType == Enum.UserInputType.MouseButton1 then
					ScreenGui.Frame.Visible = false
				end
			end
		end)
	else
		inputconnect:Disconnect()
	end
end)

GuiService.EmotesMenuOpenChanged:Connect(function(isopen)
	if isopen then
		ScreenGui.Frame.Visible = false
	end
end)

GuiService.MenuOpened:Connect(function()
	ScreenGui.Frame.Visible = false
end)

if not game:IsLoaded() then
	game.Loaded:Wait()
end

--thanks inf yield
local SynV3 = syn and DrawingImmediate
if (not is_sirhurt_closure) and (not SynV3) and (syn and syn.protect_gui) then
	syn.protect_gui(ScreenGui)
	ScreenGui.Parent = CoreGui
elseif get_hidden_gui or gethui then
	local hiddenUI = get_hidden_gui or gethui
	ScreenGui.Parent = hiddenUI()
else
	ScreenGui.Parent = CoreGui
end

local function SendNotification(title, text)
	if syn and syn.toast_notification then
		syn.toast_notification({
			Type = ToastType.Error,
			Title = title,
			Content = text
		})
	else
		StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = text
		})
	end
end

local LocalPlayer = Players.LocalPlayer

local function PlayEmote(name: string, id: IntValue)
	ScreenGui.Frame.Visible = false
	SearchBar.Text = ""
	local Humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
	local Description = Humanoid and Humanoid:FindFirstChildOfClass("HumanoidDescription")
	if not Description then
		return
	end
	if LocalPlayer.Character.Humanoid.RigType ~= Enum.HumanoidRigType.R6 then
		local succ, err = pcall(function()
			Humanoid:PlayEmoteAndGetAnimTrackById(id)
		end)
		if not succ then
			Description:AddEmote(name, id)
			Humanoid:PlayEmoteAndGetAnimTrackById(id)
		end
	else
		SendNotification(
			"Need R15",
			"..."
		)
	end
end

local function WaitForChildOfClass(parent, class)
	local child = parent:FindFirstChildOfClass(class)
	while not child or child.ClassName ~= class do
		child = parent.ChildAdded:Wait()
	end
	return child
end

local Cursor = ""
while true do
	local function Request()
		local success, Response = pcall(function()
			return game:HttpGetAsync("https://catalog.roblox.com/v1/search/items/details?Category=12&Subcategory=39&SortType=1&SortAggregation=&limit=30&IncludeNotForSale=true&cursor=".. Cursor)
		end)
		if not success then
			task.wait(10)
			return Request()
		end
		return Response
	end
	local Response = Request()
	local Body = HttpService:JSONDecode(Response)
	for i,v in pairs(Body.data) do
		AddEmote(v.name, v.id, v.price)
	end
	if Body.nextPageCursor ~= nil then
		Cursor = Body.nextPageCursor
	else
		break
	end
end

--unreleased emotes
AddEmote("Arm Wave", 5915773155)
AddEmote("Head Banging", 5915779725)
AddEmote("Face Calisthenics", 9830731012)

--wait for emotes to finish loading

local function EmotesLoaded()
	for i, loaded in pairs(LoadedEmotes) do
		if not loaded then
			return false
		end
	end
	return true
end
while not EmotesLoaded() do
	task.wait()
end
Loading:Destroy()

--sorting options setup
table.sort(Emotes, function(a, b)
	return a.lastupdated > b.lastupdated
end)
for i,v in pairs(Emotes) do
	v.sort.recentfirst = i
end

table.sort(Emotes, function(a, b)
	return a.lastupdated < b.lastupdated
end)
for i,v in pairs(Emotes) do
	v.sort.recentlast = i
end

table.sort(Emotes, function(a, b)
	return a.name:lower() < b.name:lower()
end)
for i,v in pairs(Emotes) do
	v.sort.alphabeticfirst = i
end

table.sort(Emotes, function(a, b)
	return a.name:lower() > b.name:lower()
end)
for i,v in pairs(Emotes) do
	v.sort.alphabeticlast = i
end

table.sort(Emotes, function(a, b)
	return a.price < b.price
end)
for i,v in pairs(Emotes) do
	v.sort.lowestprice = i
end

table.sort(Emotes, function(a, b)
	return a.price > b.price
end)
for i,v in pairs(Emotes) do
	v.sort.highestprice = i
end

if isfile("FavoritedEmotes.txt") then
	if not pcall(function()
		FavoritedEmotes = HttpService:JSONDecode(readfile("FavoritedEmotes.txt"))
	end) then
		FavoritedEmotes = {}
	end
else
	writefile("FavoritedEmotes.txt", HttpService:JSONEncode(FavoritedEmotes))
end

local UpdatedFavorites = {}
for i,name in pairs(FavoritedEmotes) do
	if typeof(name) == "string" then
		for i,emote in pairs(Emotes) do
			if emote.name == name then
				table.insert(UpdatedFavorites, emote.id)
				break
			end
		end
	end
end
if #UpdatedFavorites ~= 0 then
	FavoritedEmotes = UpdatedFavorites
	writefile("FavoritedEmotes.txt", HttpService:JSONEncode(FavoritedEmotes))
end

local function CharacterAdded(Character)
	for i,v in pairs(Frame:GetChildren()) do
		if not v:IsA("UIGridLayout") then
			v:Destroy()
		end
	end
	local Humanoid = WaitForChildOfClass(Character, "Humanoid")
	local Description = Humanoid:WaitForChild("HumanoidDescription", 5) or Instance.new("HumanoidDescription", Humanoid)
	local random = Instance.new("TextButton")
	local Ratio = Instance.new("UIAspectRatioConstraint")
	Ratio.AspectType = Enum.AspectType.ScaleWithParentSize
	Ratio.Parent = random
	random.LayoutOrder = 0
	random.TextColor3 = Color3.new(1, 1, 1)
	random.BorderSizePixel = 0
	random.BackgroundTransparency = 0.5
	random.BackgroundColor3 = Color3.new(0, 0, 0)
	random.TextScaled = true
	random.Text = "Random"
	random:SetAttribute("name", "")
	Corner:Clone().Parent = random
	random.MouseButton1Click:Connect(function()
		local randomemote = Emotes[math.random(1, #Emotes)]
		PlayEmote(randomemote.name, randomemote.id)
	end)
	random.MouseEnter:Connect(function()
		EmoteName.Text = "Random"
	end)
	random.Parent = Frame
	for i,Emote in pairs(Emotes) do
		Description:AddEmote(Emote.name, Emote.id)
		local EmoteButton = Instance.new("ImageButton")
		local IsFavorited = table.find(FavoritedEmotes, Emote.id)
		EmoteButton.LayoutOrder = Emote.sort[CurrentSort] + ((IsFavorited and 0) or #Emotes)
		EmoteButton.Name = Emote.id
		EmoteButton:SetAttribute("name", Emote.name)
		Corner:Clone().Parent = EmoteButton
		EmoteButton.Image = Emote.icon
		EmoteButton.BackgroundTransparency = 0.5
		EmoteButton.BackgroundColor3 = Color3.new(0, 0, 0)
		EmoteButton.BorderSizePixel = 0
		Ratio:Clone().Parent = EmoteButton
		local EmoteNumber = Instance.new("TextLabel")
		EmoteNumber.Name = "number"
		EmoteNumber.TextScaled = true
		EmoteNumber.BackgroundTransparency = 1
		EmoteNumber.TextColor3 = Color3.new(1, 1, 1)
		EmoteNumber.BorderSizePixel = 0
		EmoteNumber.AnchorPoint = Vector2.new(0.5, 0.5)
		EmoteNumber.Size = UDim2.new(0.2, 0, 0.2, 0)
		EmoteNumber.Position = UDim2.new(0.1, 0, 0.9, 0)
		EmoteNumber.Text = Emote.sort[CurrentSort]
		EmoteNumber.TextXAlignment = Enum.TextXAlignment.Center
		EmoteNumber.TextYAlignment = Enum.TextYAlignment.Center
		local UIStroke = Instance.new("UIStroke")
		UIStroke.Transparency = 0.5
		UIStroke.Parent = EmoteNumber
		EmoteNumber.Parent = EmoteButton
		EmoteButton.Parent = Frame
		EmoteButton.MouseButton1Click:Connect(function()
			PlayEmote(Emote.name, Emote.id)
		end)
		EmoteButton.MouseEnter:Connect(function()
			EmoteName.Text = Emote.name
		end)
		local Favorite = Instance.new("ImageButton")
		Favorite.Name = "favorite"
		if table.find(FavoritedEmotes, Emote.id) then
			Favorite.Image = FavoriteOn
		else
			Favorite.Image = FavoriteOff
		end
		Favorite.AnchorPoint = Vector2.new(0.5, 0.5)
		Favorite.Size = UDim2.new(0.2, 0, 0.2, 0)
		Favorite.Position = UDim2.new(0.9, 0, 0.9, 0)
		Favorite.BorderSizePixel = 0
		Favorite.BackgroundTransparency = 1
		Favorite.Parent = EmoteButton
		Favorite.MouseButton1Click:Connect(function()
			local index = table.find(FavoritedEmotes, Emote.id)
			if index then
				table.remove(FavoritedEmotes, index)
				Favorite.Image = FavoriteOff
				EmoteButton.LayoutOrder = Emote.sort[CurrentSort] + #Emotes
			else
				table.insert(FavoritedEmotes, Emote.id)
				Favorite.Image = FavoriteOn
				EmoteButton.LayoutOrder = Emote.sort[CurrentSort]
			end
			writefile("FavoritedEmotes.txt", HttpService:JSONEncode(FavoritedEmotes))
		end)
	end
	for i=1,9 do
		local EmoteButton = Instance.new("Frame")
		EmoteButton.LayoutOrder = 2147483647
		EmoteButton.Name = "filler"
		EmoteButton.BackgroundTransparency = 1
		EmoteButton.BorderSizePixel = 0
		Ratio:Clone().Parent = EmoteButton
		EmoteButton.Visible = true
		EmoteButton.Parent = Frame
		EmoteButton.MouseEnter:Connect(function()
			EmoteName.Text = "Select an Emote"
		end)
	end
end

if LocalPlayer.Character then
	CharacterAdded(LocalPlayer.Character)
end
LocalPlayer.CharacterAdded:Connect(CharacterAdded)
}

-- End Command!
local function processCommand(commandText)
    local parts = split(commandText:lower():match("^%s*(.-)%s*$"), " ")
    local command = parts[1]
    local targetName = table.concat(parts, " ", 2)

    if command ~= "" and commands[command] then
        local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Linear, Enum.EasingDirection.In)
        local goal = { Size = UDim2.new(1, 0, 1, 0) }
        local tween = TweenService:Create(loadingBar, tweenInfo, goal)
        tween:Play()

        tween.Completed:Connect(function()
            loadingLabel.Text = ""
            commands[command](targetName)
            textBox.Text = ""
            loadingBar.Size = UDim2.new(0, 0, 1, 0)
        end)
    else
        loadingLabel.Text = "Invalid Command! Enter 'command' to learn the commands!"
        loadingLabel.TextColor3 = Color3.fromRGB(255,0,0)
        loadingLabel.Position = UDim2.new(0, 10, 0, 106)
        loadingLabel.Size = UDim2.new(0, 310, 0, 20)
    end
end

executeButton.MouseButton1Click:Connect(function()
    processCommand(textBox.Text)
end)

textBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        processCommand(textBox.Text)
    end
end)

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

for _, gui in pairs(playerGui:GetChildren()) do
    if gui:IsA("ScreenGui") and gui.Name:find("HyCMDs") then
        gui.ResetOnSpawn = false
    end
end

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

while true do
    local hyCMDsGuis = {}

    for _, gui in pairs(playerGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Name:find("HyCMDs") then
            table.insert(hyCMDsGuis, gui)
        end
    end

    if #hyCMDsGuis > 1 then
        for i = 2, #hyCMDsGuis do
            hyCMDsGuis[i]:Destroy()
        end
    end

    wait(0)  
end
